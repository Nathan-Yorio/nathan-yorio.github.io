<!doctype html><html><head><title>2023-02-20 - GNS3 Cisco Network Scheme Security</title><base href="../../"><meta id="root-path" root-path="../../"><link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes,minimum-scale=1,maximum-scale=5"><meta charset="UTF-8"><link rel="stylesheet" href="lib/styles/obsidian-styles.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="stylesheet" href="lib/styles/plugin-styles.css"><link rel="stylesheet" href="lib/styles/snippets.css"><link rel="stylesheet" href="lib/styles/generated-styles.css"><style></style><script type="module" src="lib/scripts/graph_view.js"></script><script src="lib/scripts/graph_wasm.js"></script><script src="lib/scripts/tinycolor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js" integrity="sha512-Ch/O6kL8BqUwAfCF7Ie5SX1Hin+BJgYH4pNjRqXdTEqMsis1TUYg+j6nnI9uduPjGaj7DN4UKCZgpvoExt6dkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="lib/scripts/webpage.js"></script><script src="lib/scripts/generated.js"></script></head><body class="theme-dark mod-linux show-inline-title loading"><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="tree-container file-tree mod-nav-indicator" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">obsidian</span><button class="clickable-icon collapse-tree-button is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Bookmarks</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">media</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="bookmarks/media/elastic.png"><span class="tree-item-title">elastic</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="bookmarks/bookmarks-elastic.html"><span class="tree-item-title">Bookmarks - Elastic</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="bookmarks/moc-bookmarks.html"><span class="tree-item-title">MOC - Bookmarks</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">media</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="media/spinning-ball-realistic-slower.gif"><span class="tree-item-title">spinning-ball-realistic-slower</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Security</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Writeups</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">media</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/-2023-03-15-3.png"><span class="tree-item-title">-2023-03-15-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-20.png"><span class="tree-item-title">cnossprac1netsec-2023-02-20</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-1.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-10.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-10</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-11.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-11</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-12.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-12</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-13.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-13</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-14.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-14</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-15.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-15</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-16.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-16</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-17.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-17</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-18.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-18</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-19.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-19</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-2.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-2</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-20.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-20</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-21.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-21</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-22.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-22</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-23.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-23</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-24.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-24</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-25.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-25</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-26.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-26</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-27.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-27</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-28.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-28</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-29.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-29</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-3.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-30.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-30</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-4.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-4</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-5.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-5</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-6.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-6</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-7.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-7</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-8.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-8</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-22-9.png"><span class="tree-item-title">cnossprac1netsec-2023-02-22-9</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-1.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-10.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-10</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-2.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-2</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-3.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-4.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-4</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-5.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-5</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-6.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-6</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-7.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-7</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-8.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-8</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-02-24-9.png"><span class="tree-item-title">cnossprac1netsec-2023-02-24-9</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-08.png"><span class="tree-item-title">cnossprac1netsec-2023-03-08</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-08-1.png"><span class="tree-item-title">cnossprac1netsec-2023-03-08-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-08-2.png"><span class="tree-item-title">cnossprac1netsec-2023-03-08-2</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-08-3.png"><span class="tree-item-title">cnossprac1netsec-2023-03-08-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-08-4.png"><span class="tree-item-title">cnossprac1netsec-2023-03-08-4</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-08-5.png"><span class="tree-item-title">cnossprac1netsec-2023-03-08-5</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-08-6.png"><span class="tree-item-title">cnossprac1netsec-2023-03-08-6</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-09.png"><span class="tree-item-title">cnossprac1netsec-2023-03-09</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-09-1.png"><span class="tree-item-title">cnossprac1netsec-2023-03-09-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-10.png"><span class="tree-item-title">cnossprac1netsec-2023-03-10</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-10-1.png"><span class="tree-item-title">cnossprac1netsec-2023-03-10-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-10-2.png"><span class="tree-item-title">cnossprac1netsec-2023-03-10-2</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-10-3.png"><span class="tree-item-title">cnossprac1netsec-2023-03-10-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-10-4.png"><span class="tree-item-title">cnossprac1netsec-2023-03-10-4</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-10-5.png"><span class="tree-item-title">cnossprac1netsec-2023-03-10-5</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-10-6.png"><span class="tree-item-title">cnossprac1netsec-2023-03-10-6</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-12.png"><span class="tree-item-title">cnossprac1netsec-2023-03-12</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-12-1.png"><span class="tree-item-title">cnossprac1netsec-2023-03-12-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-13.png"><span class="tree-item-title">cnossprac1netsec-2023-03-13</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-1.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-10.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-10</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-11.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-11</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-2.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-2</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-3.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-4.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-4</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-5.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-5</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-6.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-6</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-7.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-7</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-8.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-8</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-14-9.png"><span class="tree-item-title">cnossprac1netsec-2023-03-14-9</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-15.png"><span class="tree-item-title">cnossprac1netsec-2023-03-15</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-15-1.png"><span class="tree-item-title">cnossprac1netsec-2023-03-15-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-15-2.png"><span class="tree-item-title">cnossprac1netsec-2023-03-15-2</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-15-3.png"><span class="tree-item-title">cnossprac1netsec-2023-03-15-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-15-4.png"><span class="tree-item-title">cnossprac1netsec-2023-03-15-4</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-15-5.png"><span class="tree-item-title">cnossprac1netsec-2023-03-15-5</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-20.png"><span class="tree-item-title">cnossprac1netsec-2023-03-20</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-20-1.png"><span class="tree-item-title">cnossprac1netsec-2023-03-20-1</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-20-2.png"><span class="tree-item-title">cnossprac1netsec-2023-03-20-2</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-20-3.png"><span class="tree-item-title">cnossprac1netsec-2023-03-20-3</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/media/cnossprac1netsec-2023-03-20-4.png"><span class="tree-item-title">cnossprac1netsec-2023-03-20-4</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/2023-02-20-gns3-cisco-network-scheme-security.html"><span class="tree-item-title">2023-02-20 - GNS3 Cisco Network Scheme Security</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="security/writeups/moc-security-writeups.html"><span class="tree-item-title">MOC - Security Writeups</span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="home.html"><span class="tree-item-title">Home</span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div></div><div class="document-container show"><div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties" tabindex="-1" style="tab-size:4"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section" style="min-height:1888px"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div><div class="mod-header"></div><div><pre class="frontmatter language-yaml" tabindex="0" style="display:none"><code class="language-yaml is-loaded"><span class="token key atrule">aliases</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> GNS3 Cisco Network Scheme Security
<span class="token key atrule">imageNameKey</span><span class="token punctuation">:</span> cnossprac1netsec</code><button class="copy-code-button">Copy</button></pre></div><div><div class="center-menu"><span class="moc">GNS3 Cisco Network Scheme Security</span></div></div><div><p>Tags:<br><a href="#cisco" class="tag" target="_blank" rel="noopener">#cisco</a> , <a href="#router" class="tag" target="_blank" rel="noopener">#router</a>, <a href="#switch" class="tag" target="_blank" rel="noopener">#switch</a>, <a href="#Network" class="tag" target="_blank" rel="noopener">#Network</a> , <a href="#vpn" class="tag" target="_blank" rel="noopener">#vpn</a> , <a href="#gns3" class="tag" target="_blank" rel="noopener">#gns3</a>, <a href="#dynamips" class="tag" target="_blank" rel="noopener">#dynamips</a>, <a href="#vios" class="tag" target="_blank" rel="noopener">#vios</a>, <a href="#ios" class="tag" target="_blank" rel="noopener">#ios</a>, <a href="#virtual-machine" class="tag" target="_blank" rel="noopener">#virtual-machine</a> , <a href="#virtualization" class="tag" target="_blank" rel="noopener">#virtualization</a> , <a href="#CCNA" class="tag" target="_blank" rel="noopener">#CCNA</a><br></p></div><div><hr></div><div><div class="center-menu"><span class="moc">Navigation</span></div></div><div><ul><li data-line="0">Back to <a data-tooltip-position="top" aria-label="https://nathanyor.io" rel="noopener" class="external-link" href="https://nathanyor.io" target="_blank">nathanyor.io 🏠</a></li><li data-line="1">Back to <a data-href="Home" href="home.html" class="internal-link" target="_self" rel="noopener">Home</a></li></ul></div><div><hr></div><div class="heading-wrapper"><h1 data-heading="Synopsis" class="heading" id="Synopsis"><div class="heading-before"></div>Synopsis<div class="heading-after">...</div></h1><div class="heading-children"><div><p>This writeup is essentially a trial an error documentation of my learning process for configuration a site-to-site VPN and site-to-site VPN with firewall using CISCO IOS images in GNS3 with a mock network setup.</p></div></div></div><div class="heading-wrapper"><h1 data-heading="References" class="heading" id="References"><div class="heading-before"></div>References<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Misc" class="heading" id="Misc"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Misc<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><a data-tooltip-position="top" aria-label="https://github.com/GNS3/gns3-gui/releases" rel="noopener" class="external-link" href="https://github.com/GNS3/gns3-gui/releases" target="_blank">Releases · GNS3/gns3-gui</a></li><li data-line="1"><a data-tooltip-position="top" aria-label="https://docs.gns3.com/docs/emulators/cisco-ios-images-for-dynamips/" rel="noopener" class="external-link" href="https://docs.gns3.com/docs/emulators/cisco-ios-images-for-dynamips/" target="_blank">Cisco IOS images for Dynamips | GNS3 Documentation</a></li><li data-line="2"><a data-tooltip-position="top" aria-label="https://docs.gns3.com/docs/getting-started/installation/linux" rel="noopener" class="external-link" href="https://docs.gns3.com/docs/getting-started/installation/linux" target="_blank">GNS3 Linux Install | GNS3 Documentation</a></li><li data-line="3"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/support/routers/7200-series-routers/products-installation-and-configuration-guides-list.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/support/routers/7200-series-routers/products-installation-and-configuration-guides-list.html" target="_blank">Cisco 7200 Series Routers - Configuration Guides - Cisco</a></li><li data-line="4"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-software-releases-122-mainline/46741-backup-config.html#em-prog" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-software-releases-122-mainline/46741-backup-config.html#em-prog" target="_blank">Understand how to Backup and Restore Configuration Files - Cisco</a></li><li data-line="5"><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Expect" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Expect" target="_blank">Expect Scripts - Wikipedia</a></li><li data-line="6"><a data-tooltip-position="top" aria-label="https://phoenixnap.com/kb/linux-expect" rel="noopener" class="external-link" href="https://phoenixnap.com/kb/linux-expect" target="_blank">Linux expect Command {Basic Use With Variables and Commands}</a></li><li data-line="7"><a data-tooltip-position="top" aria-label="https://www.man7.org/linux/man-pages/man1/expect.1.html" rel="noopener" class="external-link" href="https://www.man7.org/linux/man-pages/man1/expect.1.html" target="_blank">expect(1) - Linux manual page</a></li><li data-line="8"><a data-tooltip-position="top" aria-label="https://wiki.tcl-lang.org/page/Expect" rel="noopener" class="external-link" href="https://wiki.tcl-lang.org/page/Expect" target="_blank">Expect / Tc Lang Official docs</a></li><li data-line="9"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/fundamentals/configuration/15mt/fundamentals-15-mt-book/cf-cli-basics.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/fundamentals/configuration/15mt/fundamentals-15-mt-book/cf-cli-basics.html" target="_blank">Using the Cisco IOS Command-Line Interface Cisco IOS 15.5M&amp;T - Cisco</a></li><li data-line="10"><a data-tooltip-position="top" aria-label="https://getlabsdone.com/how-to-integrate-vmware-virtualbox-qemu-all-vms-in-gns3/#GNS3-Integration-with-Qemu-kvm-VM" rel="noopener" class="external-link" href="https://getlabsdone.com/how-to-integrate-vmware-virtualbox-qemu-all-vms-in-gns3/#GNS3-Integration-with-Qemu-kvm-VM" target="_blank">How to integrate VM with gns3? – VMware Workstation, VirtualBox, Qemu KVM. – GetLabsDone</a></li><li data-line="11"><a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/network-layer/what-is-ipsec/" rel="noopener" class="external-link" href="https://www.cloudflare.com/learning/network-layer/what-is-ipsec/" target="_blank">Cloudflare what is IPsec</a></li><li data-line="12"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/vpn_modules/6342/vpn_cg/6342site3.html#wp1036058" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/vpn_modules/6342/vpn_cg/6342site3.html#wp1036058" target="_blank">Cisco IOS VPN Configuration Guide - Site-to-Site and Extranet VPN Business Scenarios</a></li><li data-line="13"><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Internet_Security_Association_and_Key_Management_Protocol" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Internet_Security_Association_and_Key_Management_Protocol" target="_blank">Internet Security Association and Key Management Protocol - Wikipedia</a></li><li data-line="14"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/7039-1.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/support/docs/ip/open-shortest-path-first-ospf/7039-1.html" target="_blank">Understand Open Shortest Path First (OSPF) - Design Guide - Cisco</a></li><li data-line="15"><a data-tooltip-position="top" aria-label="https://www.youtube.com/watch?v=EA1zDIKRQms" rel="noopener" class="external-link" href="https://www.youtube.com/watch?v=EA1zDIKRQms" target="_blank">GNS3 Talks: IOSvL2 switching appliance import &amp; configuration - YouTube</a></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="ASA" class="heading" id="ASA"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>ASA<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/support/security/adaptive-security-appliance-asa-software/products-installation-and-configuration-guides-list.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/support/security/adaptive-security-appliance-asa-software/products-installation-and-configuration-guides-list.html" target="_blank">Cisco Secure Firewall ASA - Configuration Guides</a></li><li data-line="1"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asav/quick-start-book/asav-98-qsg/asav-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asav/quick-start-book/asav-98-qsg/asav-config.html" target="_blank">Cisco Adaptive Security Virtual Appliance (ASAv) Getting Started Guide, 9.8 - Configure the ASAv</a><ul><li data-line="2"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/configuration/general/asa-98-general-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/configuration/general/asa-98-general-config.html" target="_blank">CLI Book 1: Cisco ASA Series General Operations CLI Configuration Guide, 9.8 - Cisco</a></li><li data-line="3"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/configuration/firewall/asa-98-firewall-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/configuration/firewall/asa-98-firewall-config.html" target="_blank">CLI Book 2: Cisco ASA Series Firewall CLI Configuration Guide, 9.8 - Cisco</a></li><li data-line="4"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/configuration/vpn/asa-98-vpn-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/configuration/vpn/asa-98-vpn-config.html" target="_blank">CLI Book 3: Cisco ASA Series VPN CLI Configuration Guide, 9.8 - Cisco</a></li><li data-line="5"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asdm78/general/asdm-78-general-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asdm78/general/asdm-78-general-config.html" target="_blank">ASDM Book 1: Cisco ASA Series General Operations ASDM Configuration Guide, 7.8 - Cisco</a></li><li data-line="6"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asdm78/firewall/asdm-78-firewall-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asdm78/firewall/asdm-78-firewall-config.html" target="_blank">ASDM Book 2: Cisco ASA Series Firewall ASDM Configuration Guide, 7.8 - Cisco</a></li><li data-line="7"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asdm78/vpn/asdm-78-vpn-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asdm78/vpn/asdm-78-vpn-config.html" target="_blank">ASDM Book 3: Cisco ASA Series VPN ASDM Configuration Guide, 7.8 - Cisco</a></li></ul></li><li data-line="8"><a data-tooltip-position="top" aria-label="https://www.youtube.com/watch?v=lTlCK_B-oUQ" rel="noopener" class="external-link" href="https://www.youtube.com/watch?v=lTlCK_B-oUQ" target="_blank">Site-to-Site VPN through Cisco ASA Firewall Configuration - YouTube</a></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="GNS3 Marketplace (lists of supported images and instructions)" class="heading" id="GNS3_Marketplace_(lists_of_supported_images_and_instructions)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>GNS3 Marketplace (lists of supported images and instructions)<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/cisco-asa" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/cisco-asa" target="_blank">Cisco-Asa</a> - firewall images</li><li data-line="1"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/cisco-asav" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/cisco-asav" target="_blank">Cisco-ASAV</a> - virtual firewall emulators</li><li data-line="2"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/cisco-iosv" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/cisco-iosv" target="_blank">Cisco-IOSV</a> - virtual router QEMU emulators</li><li data-line="3"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/cisco-iosvl2" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/cisco-iosvl2" target="_blank">Cisco-IOSV-L2</a> - virtual Layer 2 switch QEMU emulators</li><li data-line="4"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/iou-l2" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/iou-l2" target="_blank">Cisco-IOU-L2</a> - virtual layer 2 switches on linux, not QEMU</li><li data-line="5"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/cisco-iou-l3" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/cisco-iou-l3" target="_blank">Cisco-IOU-L3</a> - virtual layer 3 on linux, not QEMU (proprietary cisco employee type)</li><li data-line="6"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/cisco-7200" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/cisco-7200" target="_blank">Cisco 7200</a> - support C7200 series routers - <code>c7200-adventerprisek9-mz.124-24.T5.image</code></li></ul></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Commands" class="heading" id="Commands"><div class="heading-before"></div>Commands<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="That ended up being used very frequently" class="heading" id="That_ended_up_being_used_very_frequently"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>That ended up being used very frequently<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0">linux custom bins</li></ul></div><div><pre><code>gns3-cnoss
gns3server
gns3server --local
gns3-cnoss-taphost
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">Cisco Router</li></ul></div><div><pre><code>show running-config
show ip interface brief 
show access-lists
show ip route
config-register 0x2102
show crypto map &lt;mapname&gt;
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">Cisco ASA</li></ul></div><div><pre><code>&lt;command name&gt; ? --&gt; get more info about any command's options
enable
configure terminal
terminal pager 0
show interface summary
show interface ip brief
show run crypto map
show run crypto isakmp sa
show crypto ipsec sa
sh access-list
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">linux troubleshooting</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">ip route # the one called "default" should be gateway
route -nv
ifconfig
sysctl net.ipv4.ip_forward #should be set to 1
arp -a
sudo route add -net 10.10.10.0 netmask 255.255.255.0 gw 192.168.1.5
sudo ip route add 10.10.0.0/16 via 10.10.40.0 dev ens4

# I deleted this route for KVM because it appeared to be doing nothing
sudo ip route del 169.254.0.0/16 via 0.0.0.0 dev virbr0
</code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="---------------------- Tasks ----------------------" class="heading" id="----------------------_Tasks_----------------------"><div class="heading-before"></div>---------------------- Tasks ----------------------<div class="heading-after">...</div></h1><div class="heading-children"></div></div><div class="heading-wrapper"><h1 data-heading="Install GNS3" class="heading" id="Install_GNS3"><div class="heading-before"></div>Install GNS3<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Linux KVM Installation" class="heading" id="Linux_KVM_Installation"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Linux KVM Installation<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><p>this method is most valuable if someone wished to isolate GNS3 resources or deploy on an off-host machine, but it's not necessary on linux in order to get the KVM support for Cisco images</p></li><li data-line="2"><p>it's not super obvious, but GNS3 does have a premade KVM VM that can be acquired from their <a data-tooltip-position="top" aria-label="https://github.com/GNS3/gns3-gui/releases" rel="noopener" class="external-link" href="https://github.com/GNS3/gns3-gui/releases" target="_blank">github release page</a><br><span width="300" alt="cnossprac1netsec-2023-02-22.png" src="security/writeups/media/cnossprac1netsec-2023-02-22.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22.png" src="security/writeups/media/cnossprac1netsec-2023-02-22.png" style="max-width:100%"></span></p></li><li data-line="5"><p>their KVM image comes with a startup script that looks like:</p></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#!/bin/bash

if [[ ! $(ip link show virbr0) ]]
then
  sudo apt update
  sudo apt install -y libvirt-bin
fi

if [[ ! $(ip link show tap-gns3vm) ]]
then
  echo "Creating TAP interface"
  sudo ip tuntap add dev tap-gns3vm mode tap user $(whoami)
  sudo ip link set tap-gns3vm up
  sudo brctl addif virbr0 tap-gns3vm
fi

qemu-system-x86_64 -name "GNS3 VM" -m 2048M -cpu host -enable-kvm -machine smm=off -boot order=c \
-drive file="GNS3 VM-disk001.qcow2",if=virtio,index=0,media=disk \
-drive file="GNS3 VM-disk002.qcow2",if=virtio,index=1,media=disk \
-device virtio-net-pci,netdev=nic0 -netdev tap,id=nic0,ifname=tap-gns3vm,script=no,downscript=no
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">I dropped this monster command into a local binary called gns3 so that I can run it with an alias</li><li data-line="1">and redirected the launch to the absolute path of the images</li><li data-line="2">placed in ~/.local/bin/gns-cnoss</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#!/bin/bash

echo "Creating TAP interface"
sudo ip tuntap add dev tap-gns3vm mode tap user $(whoami)
sudo ip link set tap-gns3vm up
sudo brctl addif virbr0 tap-gns3vm

echo "Starting gns3 vm..."
sudo qemu-system-x86_64 -name "GNS3 VM" -m 2048M -cpu host -enable-kvm -machine smm=off -boot order=c \
-drive file="/var/lib/libvirt/images/gns3-cnoss/GNS3 VM-disk001.qcow2",if=virtio,index=0,media=disk \
-drive file="/var/lib/libvirt/images/gns3-cnoss/GNS3 VM-disk002.qcow2",if=virtio,index=1,media=disk \
-device virtio-net-pci,netdev=nic0 -netdev tap,id=nic0,ifname=tap-gns3vm,script=no,downscript=no
</code><button class="copy-code-button">Copy</button></pre></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content"><p>I noticed later that for whatever reason this script is just too fast for the interfaces to setup before the VM starts up, so I added a sleep to give it a moment, which seems to have fixed the issue 🤷</p></div></div></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">[....]
sudo brctl addif virbr0 tap-gns3vm
sleep 3s
echo "Starting gns3 vm..."
[....]
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">I've already got KVM installed and libvirt, so I'm just going to manually perform the tap interface creation and run the bottom part when I want to load their <code>qcows</code></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#add a new bridge device called tap-gns3vm
sudo ip tuntap add dev tap-gns3vm mode tap user $(whoami)
#enable the new interface
sudo ip link set tap-gns3vm up
#attach the new interface to the virbr0 virtual bridge
sudo brctl addif virbr0 tap-gns3vm
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><code>brctl show virbr0</code> yields</li></ul></div><div><pre><code>bridge name	bridge id		STP enabled	interfaces
virbr0		8000.525400ca8e4c	yes		tap-gns3vm
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">should be able to boot it up like <code>gns3-cnoss</code>, <a rel="noopener" class="external-link" href="http://192.168.122.76:80" target="_blank">http://192.168.122.76:80</a> web GUI access</li></ul></div><div><p><span width="400" alt="cnossprac1netsec-2023-02-22-5.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-5.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-5.png" style="max-width:100%"></span></p></div><div><pre><code>ping 192.168.122.76
PING 192.168.122.76 (192.168.122.76) 56(84) bytes of data.
64 bytes from 192.168.122.76: icmp_seq=1 ttl=64 time=0.122 ms
64 bytes from 192.168.122.76: icmp_seq=2 ttl=64 time=0.187 ms
64 bytes from 192.168.122.76: icmp_seq=3 ttl=64 time=0.171 ms
^C
--- 192.168.122.76 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2029ms
rtt min/avg/max/mdev = 0.122/0.160/0.187/0.027 ms
</code><button class="copy-code-button">Copy</button></pre></div><div><p>visiting the VM in the browser yields</p></div><div><p><span alt="cnossprac1netsec-2023-02-22-6.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-6.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-6.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-6.png"></span></p></div><div><ul><li data-line="0">quick little test in the VM shell to see if I can access the internet</li></ul></div><div><p><span alt="cnossprac1netsec-2023-02-22-7.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-7.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-7.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-7.png"></span></p></div><div><ul><li data-line="0"><p>quick little test in the VM shell to see if my bridge interface is working, because I should be able to view local area network devices<br><span width="500" alt="cnossprac1netsec-2023-02-22-8.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-8.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-8.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-8.png" style="max-width:100%"></span></p></li><li data-line="3"><p>router response<br><span width="500" alt="cnossprac1netsec-2023-02-22-9.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-9.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-9.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-9.png" style="max-width:100%"></span></p></li><li data-line="6"><p>final personal test was seeing if I could ping and ssh to my local server, yeah looks good, bridge is working correctly<br><span alt="cnossprac1netsec-2023-02-22-10.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-10.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-10.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-10.png"></span></p></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Windows Installation" class="heading" id="Windows_Installation"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Windows Installation<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><p><a data-tooltip-position="top" aria-label="https://docs.gns3.com/docs/getting-started/installation/download-gns3-vm/" rel="noopener" class="external-link" href="https://docs.gns3.com/docs/getting-started/installation/download-gns3-vm/" target="_blank">Downloading the GNS3 VM | GNS3 Documentation</a></p></li><li data-line="1"><p>just as with linux KVM, windows VM also runs GNS3 (and it is required for KVM support on windows)</p></li><li data-line="3"><p>can be imported into virtualbox or vmware and if interfaces with host pc are desired they can be NAT'd through virtual interfaces on windows<br><span width="500" alt="cnossprac1netsec-2023-03-20.png" src="security/writeups/media/cnossprac1netsec-2023-03-20.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-20.png" src="security/writeups/media/cnossprac1netsec-2023-03-20.png" style="max-width:100%"></span></p></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Install GNS3 Client" class="heading" id="Install_GNS3_Client"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Install GNS3 Client<div class="heading-after">...</div></h2><div class="heading-children"><div><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">Realize that the web GUI is pretty awful if you want to follow any guides written online anywhere including GNS3's own documentation 🤷</div></div></div></div><div><ul><li data-line="0">follow <a data-tooltip-position="top" aria-label="https://docs.gns3.com/docs/getting-started/installation/linux" rel="noopener" class="external-link" href="https://docs.gns3.com/docs/getting-started/installation/linux" target="_blank">gns3 install documentation</a></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">sudo add-apt-repository ppa:gns3/ppa
sudo apt update                                
sudo apt install gns3-gui gns3-server

# Not needed, probably going to break something with this
sudo dpkg --add-architecture i386
sudo apt update
sudo apt install gns3-iou
</code><button class="copy-code-button">Copy</button></pre></div><div><p><span width="800" alt="cnossprac1netsec-2023-02-22-24.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-24.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-24.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-24.png" style="max-width:100%"></span></p></div><div><p><span width="800" alt="cnossprac1netsec-2023-02-22-25.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-25.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-25.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-25.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0"><p>run <code>gns3server</code>, only if you want to test local virtual networks, but without good hardware virtualization support</p><ul><li data-line="1">which turns out to only matter on windows in the end</li></ul></li><li data-line="3"><p>need to add "remote" server in order to connect to VM<br><span width="700" alt="cnossprac1netsec-2023-02-22-27.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-27.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-27.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-27.png" style="max-width:100%"></span></p></li><li data-line="6"><p>note that the desktop GUI actually gives a real human error when something isn't correct (the web gui obfuscates a lot of these messages)<br><span width="500" alt="cnossprac1netsec-2023-02-22-28.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-28.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-28.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-28.png" style="max-width:100%"></span></p></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Install GNS3 Server on Linux Natively" class="heading" id="Install_GNS3_Server_on_Linux_Natively"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Install GNS3 Server on Linux Natively<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0">add myself to the groups required to launch GNS3 things so that I don't have to be sudo every time</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">
sudo apt install gns3-server
# wireshark docker 
sudo usermod -aG ubridge yorionathan
sudo usermod -aG libvirt yorionathan
sudo usermod -aG kvm yorionathan
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">running this is as simple as</li></ul></div><div><pre><code>gns3server
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">occasionally there are issues where it can't correct bind to the local network interface, assumed that this is related to other things running, solved with a reboot usually</li></ul></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Import Virtual Firmware Images" class="heading" id="Import_Virtual_Firmware_Images"><div class="heading-before"></div>Import Virtual Firmware Images<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="See if the lab hardware images can be simulated in GNS3" class="heading" id="See_if_the_lab_hardware_images_can_be_simulated_in_GNS3"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>See if the lab hardware images can be simulated in GNS3<div class="heading-after">...</div></h2><div class="heading-children"><div><p><span width="600" alt="cnossprac1netsec-2023-02-22-11.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-11.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-11.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-11.png" style="max-width:100%"></span></p></div><div><p><span width="500" alt="cnossprac1netsec-2023-02-22-12.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-12.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-12.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-12.png" style="max-width:100%"></span></p></div><div><p><span width="600" alt="cnossprac1netsec-2023-02-22-13.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-13.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-13.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-13.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">something I personally found potentially confusing<br><span width="700" alt="cnossprac1netsec-2023-02-22-14.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-14.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-14.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-14.png" style="max-width:100%"></span></li></ul></div><div><p><span width="600" alt="cnossprac1netsec-2023-02-22-15.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-15.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-15.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-15.png" style="max-width:100%"></span></p></div><div><p><span width="600" alt="cnossprac1netsec-2023-02-22-16.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-16.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-16.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-16.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0"><p>datasheet says default onboard memory for these is 512 MB<br><span width="700" alt="cnossprac1netsec-2023-02-22-17.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-17.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-17.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-17.png" style="max-width:100%"></span></p></li><li data-line="3"><p>so that's what was set<br><span width="700" alt="cnossprac1netsec-2023-02-22-18.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-18.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-18.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-18.png" style="max-width:100%"></span></p></li></ul></div><div class="heading-wrapper"><h3 data-heading="Ah wait a minute...." class="heading" id="Ah_wait_a_minute...."><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Ah wait a minute....<div class="heading-after">...</div></h3><div class="heading-children"><div><p><span width="600" alt="cnossprac1netsec-2023-02-22-16.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-16.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-16.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-16.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0"><p>the <a data-tooltip-position="top" aria-label="https://docs.gns3.com/docs/emulators/cisco-ios-images-for-dynamips/" rel="noopener" class="external-link" href="https://docs.gns3.com/docs/emulators/cisco-ios-images-for-dynamips/" target="_blank">gns3 documentation</a> says...</p></li><li data-line="2"><p>okay so none of these bins are in their recommended categories...<br><span width="700" alt="cnossprac1netsec-2023-02-22-19.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-19.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-19.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-19.png" style="max-width:100%"></span></p></li><li data-line="5"><p>and they don't support catalyst switches at all<br><span width="700" alt="cnossprac1netsec-2023-02-22-20.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-20.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-20.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-20.png" style="max-width:100%"></span></p></li><li data-line="8"><p>annnnd of course the C2960 is a catalyst switch<br><span width="700" alt="cnossprac1netsec-2023-02-22-21.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-21.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-21.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-21.png" style="max-width:100%"></span></p></li><li data-line="11"><p>annnnd the ASA 5505 is a <a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/cisco-asa" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/cisco-asa" target="_blank">supported version...</a> but they recommend not to use these as the consume all of CPU<br><span width="500" alt="cnossprac1netsec-2023-02-22-22.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-22.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-22.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-22.png" style="max-width:100%"></span></p></li></ul></div><div><p><span width="600" alt="cnossprac1netsec-2023-02-22-23.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-23.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-23.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-23.png" style="max-width:100%"></span></p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Find some alternatives to lab images" class="heading" id="Find_some_alternatives_to_lab_images"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Find some alternatives to lab images<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Need:" class="heading" id="Need:"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Need:<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="Router - probably the 7200 - or a virtual router VIOS" class="heading" id="Router_-_probably_the_7200_-_or_a_virtual_router_VIOS"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router - probably the 7200 - or a virtual router VIOS<div class="heading-after">...</div></h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="Firewall - ASA 5504 will work, perhaps pfsense or something else - or ASAv" class="heading" id="Firewall_-_ASA_5504_will_work,_perhaps_pfsense_or_something_else_-_or_ASAv"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Firewall - ASA 5504 will work, perhaps pfsense or something else - or ASAv<div class="heading-after">...</div></h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="Switch - IOU L2 Binary or IOSvL2" class="heading" id="Switch_-_IOU_L2_Binary_or_IOSvL2"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Switch - IOU L2 Binary or IOSvL2<div class="heading-after">...</div></h4><div class="heading-children"><div><p><span width="500" alt="cnossprac1netsec-2023-02-22-29.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-29.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-29.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-29.png" style="max-width:100%"></span></p></div><div><p><span width="500" alt="cnossprac1netsec-2023-02-22-30.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-30.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-22-30.png" src="security/writeups/media/cnossprac1netsec-2023-02-22-30.png" style="max-width:100%"></span></p></div></div></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Import images into GNS3 desktop GUI" class="heading" id="Import_images_into_GNS3_desktop_GUI"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Import images into GNS3 desktop GUI<div class="heading-after">...</div></h2><div class="heading-children"><div><p><span width="200" alt="cnossprac1netsec-2023-02-24.png" src="security/writeups/media/cnossprac1netsec-2023-02-24.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24.png" src="security/writeups/media/cnossprac1netsec-2023-02-24.png" style="max-width:100%"></span></p></div><div><p><span width="300" alt="cnossprac1netsec-2023-02-24-1.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-1.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-1.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">pick device<br><span width="500" alt="cnossprac1netsec-2023-02-24-2.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-2.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-2.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-2.png" style="max-width:100%"></span></li></ul></div><div><p><span width="500" alt="cnossprac1netsec-2023-02-24-3.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-3.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-3.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-3.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">make sure whatever binaries that are needed for the device are present</li></ul></div><div class="heading-wrapper"><h3 data-heading="C7200 Router" class="heading" id="C7200_Router"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>C7200 Router<div class="heading-after">...</div></h3><div class="heading-children"><div><p><span width="600" alt="cnossprac1netsec-2023-02-24-4.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-4.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-4.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-4.png" style="max-width:100%"></span></p></div><div><p><span width="500" alt="cnossprac1netsec-2023-02-24-5.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-5.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-5.png" style="max-width:100%"></span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="IOU L2 Linux Virtual Switch" class="heading" id="IOU_L2_Linux_Virtual_Switch"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>IOU L2 Linux Virtual Switch<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0"><a data-tooltip-position="top" aria-label="https://gns3.com/marketplace/featured/iou-l2" rel="noopener" class="external-link" href="https://gns3.com/marketplace/featured/iou-l2" target="_blank">marketplace says</a> setup configs are required<br><span width="500" alt="cnossprac1netsec-2023-02-24-6.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-6.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-6.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-6.png" style="max-width:100%"></span></li></ul></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Dump base IOS config" class="heading" id="Dump_base_IOS_config"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Dump base IOS config<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-software-releases-122-mainline/46741-backup-config.html#em-prog" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-software-releases-122-mainline/46741-backup-config.html#em-prog" target="_blank">from the config backup and restore documentation</a></li></ul></div><div><pre><code>enable
! put the password in if there is one
terminal length 0
! which will dump out the whole terminal and not screen by screen

show running-config
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><code>show running-config</code> dumps the router's entire current config to terminal</li><li data-line="1">but only if <code>terminal length 0</code> is enabled, for single screen</li></ul></div><div><pre class="language-cisco" tabindex="0"><code class="language-cisco is-loaded">Building configuration...

Current configuration : 1023 bytes
!
upgrade fpd auto
version 12.4
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname R1-Cisco7200
!
boot-start-marker
boot-end-marker
!
logging message-counter syslog
!
no aaa new-model
ip source-route
no ip icmp rate-limit unreachable
ip cef
!
no ip domain lookup
no ipv6 cef
!
multilink bundle-name authenticated
!
archive
 log config
  hidekeys
! 
ip tcp synwait-time 5
!
interface Ethernet0/0
 no ip address
 shutdown
 duplex auto
!
interface GigabitEthernet0/0
 no ip address
 shutdown
 duplex full
 speed 1000
 media-type gbic
 negotiation auto
!
ip forward-protocol nd
no ip http server
no ip http secure-server
!
no cdp log mismatch duplex
!
control-plane
!
gatekeeper
 shutdown
!
line con 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
 stopbits 1
line aux 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
 stopbits 1
line vty 0 4
 login
!
end
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><p>there are default base startup configs which are stored locally<br><span width="700" alt="cnossprac1netsec-2023-02-24-7.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-7.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-7.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-7.png" style="max-width:100%"></span></p></li><li data-line="3"><p>if one were to look at this, the config the router prints is being sourced from here</p></li></ul></div><div><pre><code>!
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname %h
!
ip cef
no ip domain-lookup
no ip icmp rate-limit unreachable
ip tcp synwait 5
no cdp log mismatch duplex
!
line con 0
 exec-timeout 0 0
 logging synchronous
 privilege level 15
 no login
line aux 0
 exec-timeout 0 0
 logging synchronous
 privilege level 15
 no login
!
!
end
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">but something to note is that those configs are actually present in the GNS3 VM home directory as well</li><li data-line="1">so if the GNS3 client is connect to the VM, it's probably pulling the local path of these base configs by default and not anything in the client<br><span alt="cnossprac1netsec-2023-02-24-8.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-8.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-8.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-8.png"></span></li></ul></div><div class="heading-wrapper"><h3 data-heading="Simple router config and project backup test" class="heading" id="Simple_router_config_and_project_backup_test"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Simple router config and project backup test<div class="heading-after">...</div></h3><div class="heading-children"><div><pre><code>configure terminal
interface GigabitEthernet 0/0
ip address 10.10.10.1 255.255.255.0
no shut

*Feb 24 12:24:01.315: %LINK-3-UPDOWN: Interface GigabitEthernet0/0, changed state to up
*Feb 24 12:24:02.315: %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up

exit
! (config-if)
exit
! (config)

write memory

! Should see
! Building configuration...
! [OK]



show ip interface brief


R1-Cisco7200#show ip interface brief 
Interface                  IP-Address      OK? Method Status                Protocol
Ethernet0/0                unassigned      YES unset  administratively down down    
GigabitEthernet0/0         10.10.10.1      YES manual up                    up      

</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">assign PC IP and gateway</li></ul></div><div><pre><code>PC1&gt; ip 10.10.10.2/24 10.10.10.1


PC1&gt; ping 10.10.10.1

84 bytes from 10.10.10.1 icmp_seq=1 ttl=255 time=20.110 ms
84 bytes from 10.10.10.1 icmp_seq=2 ttl=255 time=2.098 ms
84 bytes from 10.10.10.1 icmp_seq=3 ttl=255 time=3.199 ms
84 bytes from 10.10.10.1 icmp_seq=4 ttl=255 time=2.336 ms
84 bytes from 10.10.10.1 icmp_seq=5 ttl=255 time=2.534 ms
</code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Importing a Virtual Operating System as PC into GNS3" class="heading" id="Importing_a_Virtual_Operating_System_as_PC_into_GNS3"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Importing a Virtual Operating System as PC into GNS3<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Linux Native (See KVM for actual import, same as Native)" class="heading" id="Linux_Native_(See_KVM_for_actual_import,_same_as_Native)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Linux Native (See KVM for actual import, same as Native)<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0">add in a NAT cloud, which gns3-server automatically uses to create a TAP interface with the host<br><span width="600" alt="cnossprac1netsec-2023-03-10.png" src="security/writeups/media/cnossprac1netsec-2023-03-10.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-10.png" src="security/writeups/media/cnossprac1netsec-2023-03-10.png" style="max-width:100%"></span></li></ul></div><div><p><span width="600" alt="cnossprac1netsec-2023-03-10-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-10-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-1.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">from the NAT direct connection to the lubuntu system I can do updates, install net tools, whatever to make troubleshooting a bit easier</li></ul></div><div><p><span width="800" alt="cnossprac1netsec-2023-03-10-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-2.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-10-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-2.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">just some simple setup things<br><span width="500" alt="cnossprac1netsec-2023-03-10-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-3.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-10-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-3.png" style="max-width:100%"></span></li></ul></div></div></div><div class="heading-wrapper"><h3 data-heading="KVM" class="heading" id="KVM"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>KVM<div class="heading-after">...</div></h3><div class="heading-children"><div><p><span width="700" alt="cnossprac1netsec-2023-03-08.png" src="security/writeups/media/cnossprac1netsec-2023-03-08.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-08.png" src="security/writeups/media/cnossprac1netsec-2023-03-08.png" style="max-width:100%"></span></p></div><div><p><span width="500" alt="cnossprac1netsec-2023-03-08-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-08-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-1.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">QEMU/KVM hypervisor, 4 gigs ram<br><span width="400" alt="cnossprac1netsec-2023-03-08-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-2.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-08-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-2.png" style="max-width:100%"></span></li></ul></div><div><p><span width="400" alt="cnossprac1netsec-2023-03-08-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-3.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-08-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-3.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">upload image into GNS3</li></ul></div><div><p><span width="400" alt="cnossprac1netsec-2023-03-08-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-4.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-08-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-4.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">went back into template and changed virtio for disk type</li></ul></div><div><p><span width="400" alt="cnossprac1netsec-2023-03-08-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-08-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-5.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">boots up a Lubuntu machine<br><span width="800" alt="cnossprac1netsec-2023-03-08-6.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-6.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-08-6.png" src="security/writeups/media/cnossprac1netsec-2023-03-08-6.png" style="max-width:100%"></span></li></ul></div></div></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Notes on Some Default Router Setup Points" class="heading" id="Notes_on_Some_Default_Router_Setup_Points"><div class="heading-before"></div>Notes on Some Default Router Setup Points<div class="heading-after">...</div></h1><div class="heading-children"><div><ul><li data-line="0">Images for devices in GNS3 won't necessarily have all slots enabled by default, so whichever ones are desired are needed to be enabled in order to connect the virtual cabling</li><li data-line="1">Cisco provides some handy <a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/support/routers/7200-series-routers/products-installation-and-configuration-guides-list.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/support/routers/7200-series-routers/products-installation-and-configuration-guides-list.html" target="_blank">configuration guides</a></li></ul></div><div class="heading-wrapper"><h2 data-heading="Visual comparison of lab configs vs default GNS3 IOS configs" class="heading" id="Visual_comparison_of_lab_configs_vs_default_GNS3_IOS_configs"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Visual comparison of lab configs vs default GNS3 IOS configs<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0">need to quickly compare differences between lab setup and these virtual switches and see which parts are absolutely essential<ul><li data-line="1">use my handy little dump tool for the IOSvL2 switch</li></ul></li></ul></div><div><pre><code>./dump_config_nopass.expect 192.168.122.76 5003 switch_dump.txt
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><p>using meld to visually compare the lines of the different config files</p><ul><li data-line="1">this way I can see which are <strong>essential</strong> configuration lines and then research whatever else might matter</li><li data-line="2">all lines that are identical between them I can only assume are essential CISCO things or very common practice</li></ul></li><li data-line="4"><p>notes</p></li><li data-line="5"><p><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/https/command/nm-https-cr-book/nm-https-cr-cl-sh.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/https/command/nm-https-cr-book/nm-https-cr-cl-sh.html" target="_blank">Cisco IOS HTTP Services Command Reference - clear ip http client cookie through show ip http server secure status Support - Cisco</a></p></li><li data-line="6"><p><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/mcl/allreleasemcl/all-book.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/mcl/allreleasemcl/all-book.html" target="_blank">Cisco IOS Master Command List, All Releases - Cisco</a></p></li><li data-line="8"><p>since it appears all interfaces are already on, most important part is</p></li></ul></div><div><pre><code>interface Vlan1
 ip address 10.0.0.10 255.255.255.0
!
ip default-gateway 10.0.0.1
ip http server
ip http authentication local
ip http secure-server
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Configure Some Default Router Setup" class="heading" id="Configure_Some_Default_Router_Setup"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configure Some Default Router Setup<div class="heading-after">...</div></h2><div class="heading-children"><div><pre><code>enable
config

username admin privilege 15 password 0 admin
ip http server
ip http authentication local
ip http secure-server
ip route 0.0.0.0 0.0.0.0 10.0.0.254

interface GigabitEthernet0/0
 ip address 10.0.0.2 255.255.255.0
 duplex auto
 speed auto
 media-type rj45
!         
interface GigabitEthernet0/1
 ip address 10.0.1.1 255.255.255.0
 duplex auto
 speed auto
 media-type rj45
!  
</code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Importing or Dumping Cisco Configurations with Scripts" class="heading" id="Importing_or_Dumping_Cisco_Configurations_with_Scripts"><div class="heading-before"></div>Importing or Dumping Cisco Configurations with Scripts<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="TCL and Expect Scripts" class="heading" id="TCL_and_Expect_Scripts"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>TCL and Expect Scripts<div class="heading-after">...</div></h2><div class="heading-children"><div><p><a data-tooltip-position="top" aria-label="https://www.youtube.com/watch?v=zUBaLnQwbpA&amp;list=PLhfrWIlLOoKM72gSX1V1FAfw86vGT-FOD&amp;index=8" rel="noopener" class="external-link" href="https://www.youtube.com/watch?v=zUBaLnQwbpA&amp;list=PLhfrWIlLOoKM72gSX1V1FAfw86vGT-FOD&amp;index=8" target="_blank">YouTube</a><br><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Expect" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Expect" target="_blank">Expect - Wikipedia</a><br><a data-tooltip-position="top" aria-label="https://phoenixnap.com/kb/linux-expect" rel="noopener" class="external-link" href="https://phoenixnap.com/kb/linux-expect" target="_blank">Linux expect Command {Basic Use With Variables and Commands}</a><br><a data-tooltip-position="top" aria-label="https://wiki.tcl-lang.org/page/Expect" rel="noopener" class="external-link" href="https://wiki.tcl-lang.org/page/Expect" target="_blank">Expect</a></p></div><div><ul><li data-line="0">in order to import a whole config into a router over telnet (at least on linux) one can take advantage of the expect syntax and TCL scripting</li></ul></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content"><p>In this TCL language<br>"&gt;" and "#" are expressions for user and authorized modes respectively<br>and are syntactically required to get the script to interpret commands with different privileges</p></div></div></div><div><ul><li data-line="0">expect might not be installed by default so:</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">sudo apt install expect
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">using expect, <em>instead of bash</em>, one can push scripted commands over telnet to things like Cisco routers etc</li><li data-line="1">script that will push a config specified in a text file into the virtual interface over telnet</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#!/usr/bin/expect -f

# push_config.sh

# Get the variables from command line arguments to script
set router_ip [lindex $argv 0]
set router_user [lindex $argv 1]
set router_pass [lindex $argv 2]

# Open the Telnet connection and authenticate
spawn telnet $router_ip
expect "Username: "
send "$router_user\r"
expect "Password: "
send "$router_pass\r"
expect "&gt;"

# enter enable mode to configure, authenticate, begin config 
send "enable\r"
expect "Password: "
send "$router_pass\r"
expect "#"
send "configure terminal\r"
expect "(config)#"

######### Push the configuration #######
set config [exec cat config.txt]
send "$config\r"
expect "(config)#"
########################################

# Exit configuration mode
send "exit\r"
expect "#"

# Save the configuration
send "write memory\r"
expect "#"

# Close the Telnet connection
send "exit\r"
expect eof

</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">executable</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">chmod +x push_config.sh
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><p>the configuration can be whatever is needed for that particular device</p></li><li data-line="1"><p>example to send the script with command line arguments</p></li><li data-line="2"><p>I need to specify ip and port for telnet, and since this is bridged I can access telnet directly over local IP without tunneling into the GNS3 subnet from the host</p></li><li data-line="4"><p>this script can be used in reverse to dump configs from routers to local text files</p></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#!/usr/bin/expect -f

# dump_config.expect

# Get the variables from command line arguments to script
set router_ip [lindex $argv 0]
set router_port [lindex $argv 1]
# set router_user [lindex $argv 2]
# set router_pass [lindex $argv 3]
set output_config_file  [lindex $argv 2]

# Open the Telnet connection
spawn telnet $router_ip $router_port

### Authenticate if necessary
# expect "Username: "
# send "$router_user\r"
# expect "Password: "
# send "$router_pass\r"
# expect "&gt;"

# Enter enable mode
expect "#"
send "enable\r"

# Authenticate?
# expect "Password: "
# send "$router_pass\r"

####### Dump the running configuration to a file ######
expect "#"
send "terminal length 0\r"
expect "#"
send "show running-config\r"
expect "#"
# dump whatever is in buffer
#set config [string trimright $output_config_file(buffer) "#"]
set config $expect_out(buffer)
# open up the file
set active_file [open $output_config_file "w"]
# put (in empty file) contents of config
puts $active_file $config
# close the file
close $active_file
#######################################################

# Close the Telnet connection
send "exit\r"
expect eof
</code><button class="copy-code-button">Copy</button></pre></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">./dump_config.sh &lt;router_ip&gt; &lt;router_port&gt; &lt;router_user&gt; &lt;router_pass&gt; &lt;output_file&gt;
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">if a username and password would be required</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">./dump_config.expect 192.168.122.76 5002 "" "" config_dump.txt
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">if not username and password required</li></ul></div><div><pre><code>./dump_config_nopass.expect 192.168.122.76 5002 config_dump.txt
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">I had some issues with that not waiting for the buffer output to fully complete and giving me a partial config dumped to text file, so I altered it to have a timeout <code>expect</code> function to wait for the buffer to actually dump something useful before writing it to an output file</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">expect {
    "#$"
    {set output $expect_out(buffer)}
    timeout
    {send_user "Error: Timeout waiting for command output\n"; exit 1}
}
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">new script</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#!/usr/bin/expect -f

# dump_config.expect

# Get the variables from command line arguments to script
set router_ip [lindex $argv 0]
set router_port [lindex $argv 1]
# set router_user [lindex $argv 2]
# set router_pass [lindex $argv 3]
set output_config_file  [lindex $argv 2]

# Open the Telnet connection and authenticate
spawn telnet $router_ip $router_port
# expect "Username: "
# send "$router_user\r"
# expect "Password: "
# send "$router_pass\r"
# expect "&gt;"

# Enter enable mode and authenticate
expect "#"
send "enable\r"
# expect "Password: "
# send "$router_pass\r"
expect "#"

#################### Dump the running configuration to a file ###################
send "terminal length 0\r"
expect "#"
send "show running-config\r"
expect "#"
##### dump whatever is in buffer but actually wait to make sure it completes ####
expect {
    "#$"
    {set config $expect_out(buffer)}
    timeout
    {send_user "Error: Timeout waiting for command output\n"; exit 1}
}
##################################################################################
# set a variable for opening up the file
set active_file [open $output_config_file "w"]
# put (in empty file) contents of config dumped from buffer
puts $active_file $config
# close the file
close $active_file
#######################################################

# Close the Telnet connection
send "exit\r"
expect eof
</code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Talking to the Outside World from GNS3" class="heading" id="Talking_to_the_Outside_World_from_GNS3"><div class="heading-before"></div>Talking to the Outside World from GNS3<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Linux Native" class="heading" id="Linux_Native"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Linux Native<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="How one would setup an interface for the GNS3 network to talk with the host computer" class="heading" id="How_one_would_setup_an_interface_for_the_GNS3_network_to_talk_with_the_host_computer"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>How one would setup an interface for the GNS3 network to talk with the host computer<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0">create a script that will make a tap adapter for me and assign an IP address to it that can serve as my mock network</li><li data-line="1">I'm also having it let the host computer know that a static route to the <code>10.10.10.0/24</code> subnet is available via the new tap on <code>192.168.1.5</code></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#!/bin/bash

echo "Creating TAP interface for host"
sudo ip tuntap add dev tap-gns3host mode tap user $(whoami)
sudo ip addr add 192.168.1.5/24 dev tap-gns3host
sudo ip link set tap-gns3host up

echo "Adding a route to the GNS3 internal subnet"
echo "Subnet is 10.10.10.0/24, change in script for others"
sudo route add -net 10.10.10.0 netmask 255.255.255.0 gw 192.168.1.5

echo "Starting GNS3 Server...."
sleep 5s
gns3server
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">using a configuration like this it was possible to just bridge NAT with the lubuntu VM and install some small things like net-tools for troubleshooting, not really a big deal for the actual GNS3 topology though</li></ul></div><div><p><span width="500" alt="cnossprac1netsec-2023-03-10-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-4.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-10-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-4.png" style="max-width:100%"></span></p></div><div><p><span width="500" alt="cnossprac1netsec-2023-03-10-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-10-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-5.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0">configure the router to understand that it is now part of the host network on one interface</li><li data-line="1">setup translation in the router to handle NAT between the internal network and whatever the network is on the outside of GNS3</li><li data-line="2">gateway will change depending on how traffic should be routed to connected PC</li></ul></div><div><pre><code>enable
config

hostname GNS3-Router1

! the local gns3 network on 10.10.10.X
interface GigabitEthernet 0/0
ip address 10.10.10.1 255.255.255.0
no shut
exit

! the host network on 192.168.1.X
interface GigabitEthernet0/1
ip address 192.168.1.6 255.255.255.0
no shut
exit
!  

! route to the 192.168.1.X network via 192.168.1.6 gateway
! this basically says, the path to the whole 192.168.1.X network is VIA
! the gateway on 192.168.1.1 if this is my home router, but could be
! bakhtawar's laptop's IP in our connected scenario
ip route 0.0.0.0 0.0.0.0 192.168.1.1

! the route to the 192.168.1.0/24 subnet is on GigabitEthernet0/1
ip route 192.168.1.0 255.255.255.0 GigabitEthernet0/1

! setting the translation such that this is our external network
interface GigabitEthernet0/1
 ip nat inside

! setting the translation such that this is our internal network
interface GigabitEthernet0/0
 ip nat outside

! access list to allow traffic from 10.10.10.0/24 to be handled by NAT
access-list 101 permit 10.10.10.0 0.0.0.255

! tells our NAT to translate anything from the 10.10.10.0/24 subnet
! to everything on the 192.168.1.0/24 subnet
ip nat inside source list 1 interface GigabitEthernet0/0 overload

write memory
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">router dump @ 9:23:16</li></ul></div><div><pre><code>Building configuration...

Current configuration : 3430 bytes
!
! Last configuration change at 19:11:12 UTC Fri Mar 10 2023
!
version 15.6
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname Router
!
boot-start-marker
boot-end-marker
!
!
no aaa new-model
ethernet lmi ce
!
!
!
mmi polling-interval 60
no mmi auto-configure
no mmi pvc
mmi snmp-timeout 180
!
!
no ip icmp rate-limit unreachable
!
!
no ip domain lookup
ip cef
no ipv6 cef
!
multilink bundle-name authenticated
!
!
redundancy
!
no cdp log mismatch duplex
!
ip tcp synwait-time 5
! 
!
!
interface GigabitEthernet0/0
 ip address 10.10.10.1 255.255.255.0
 no ip proxy-arp
 ip nat outside
 ip virtual-reassembly in
 duplex auto
 speed auto
 media-type rj45
!
interface GigabitEthernet0/1
 ip address 192.168.1.6 255.255.255.0
 no ip proxy-arp
 ip nat inside
 ip virtual-reassembly in
 duplex auto
 speed auto
 media-type rj45
!
interface GigabitEthernet0/2
 no ip address
 shutdown
 duplex auto
 speed auto
 media-type rj45
!
interface GigabitEthernet0/3
 no ip address
 shutdown
 duplex auto
 speed auto
 media-type rj45
!
ip forward-protocol nd
!
!
no ip http server
no ip http secure-server
ip nat inside source static 10.10.10.0 192.168.1.6
ip route 0.0.0.0 0.0.0.0 192.168.1.1
ip route 192.168.1.0 255.255.255.0 GigabitEthernet0/1
!
!
!
!
control-plane
!
!
line con 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line aux 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line vty 0 4
 login
 transport input none
!
no scheduler allocate
!
end

Router#clear arp-cache
Router#ping 192.168.1.76
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 192.168.1.76, timeout is 2 seconds:
.....
Success rate is 0 percent (0/5)
Router#ping 192.168.1.1 
Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 192.168.1.1, timeout is 2 seconds:
.....
Success rate is 0 percent (0/5)
Router#wr
Building configuration...
</code><button class="copy-code-button">Copy</button></pre></div><div><p><span width="600" alt="cnossprac1netsec-2023-03-10-6.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-6.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-10-6.png" src="security/writeups/media/cnossprac1netsec-2023-03-10-6.png" style="max-width:100%"></span></p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="KVM" class="heading" id="KVM"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>KVM<div class="heading-after">...</div></h2><div class="heading-children"><div><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">(I stopped trying this route after I realized how silly it is to create these nested networks on a linux host) But I'm leaving it in here because I feel like I suffered enough with it for it to have a place in the report and I at least learned some things about creating adapters in linux and such</div></div></div></div><div class="heading-wrapper"><h3 data-heading="Creating a TAP interface on Linux to talk from Host to GNS3 network" class="heading" id="Creating_a_TAP_interface_on_Linux_to_talk_from_Host_to_GNS3_network"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Creating a TAP interface on Linux to talk from Host to GNS3 network<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0"><p><a data-tooltip-position="top" aria-label="https://www.youtube.com/watch?v=nFIsisg3uvg" rel="noopener" class="external-link" href="https://www.youtube.com/watch?v=nFIsisg3uvg" target="_blank">GNS3 bridging with Linux PC, - YouTube</a></p></li><li data-line="1"><p><a data-tooltip-position="top" aria-label="https://forum.gns3.net/post17818.html" rel="noopener" class="external-link" href="https://forum.gns3.net/post17818.html" target="_blank">How do you guys bridge your linux machines to GNS3</a></p></li><li data-line="3"><p>something of this nature is needed in order to create a network mockup inside of GNS3 that can talk to devices outside of the GNS3 VM configuration<br><span width="300" alt="cnossprac1netsec-2023-02-24-10.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-10.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-10.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-10.png" style="max-width:100%"></span></p></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">sudo apt install bridge-utils

# creating a TAP interface
#sudo tunctl -u &lt;username&gt;
#sudo tunctl -t tap0
sudo ip tuntap add dev tap-gns3-cloud mode tap user $(whoami) # I assume this would also work

sudo ifconfig tap-gns3-cloud 0.0.0.0 promisc up
sudo ifconfig eth0 0.0.0.0 promisc up

sudo brctl addbr br0-gns3-cloud # should only need to do that once?
sudo brctl addif br0-gns3-cloud tap-gns3-cloud
sudo brctl addif br0-gns3-cloud eth0

sudo ifconfig br0-gns3-cloud up
sudo ifconfig br0-gns3-cloud 192.168.1.5/24

# sudo route add default gw 10.10.10.254

sudo brctl show
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">add this reiterating part to an additional script GNS3 to recreate the interface setup after a reboot</li><li data-line="1"><code>gns3-cnoss-taphost</code></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">echo "Adding Host Bridge and TAP to GNS3"
sudo ip tuntap add dev tap-gns3vm-cloud mode tap user $(whoami) # I assume this would also work

sudo ifconfig tap-gns3vm-cloud 0.0.0.0 promisc up
sudo ifconfig eth0 0.0.0.0 promisc up

sudo brctl addif br0-gns3-cloud tap-gns3vm-cloud # attach one side of bridge adapter to host tap
sudo brctl addif br0-gns3-cloud eth0 # attach other side of bridge adapter to "host" itself

sudo ifconfig br0-gns3-cloud up #tbd if bridge adapter survives reboot... I'm not sure yet
sudo ifconfig br0-gns3-cloud 10.10.10.99/24 # nor do I know if the bridge's IP/mask surives a reboot

# sudo route add default gw 10.10.10.254 # create a default internal network route for the bridge
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><p>add the new tap interface to GNS3<br><span width="400" alt="cnossprac1netsec-2023-02-24-9.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-9.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-02-24-9.png" src="security/writeups/media/cnossprac1netsec-2023-02-24-9.png" style="max-width:100%"></span></p></li><li data-line="4"><p>create a default static route between the router and the host network</p></li></ul></div><div><pre><code>ip route 0.0.0.0 0.0.0.0 f0/0
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">flush tap interface (for troubleshooting)</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">sudo ip addr flush tap-gns3 
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">checking which routes exists already and deleting (for troubleshooting)</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">route -nv
sudo route del -net 192.168.3.0 netmask 255.255.255.0 gw 192.168.1.1
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">removing tap adapters (for troubleshooting)</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">sudo ip tuntap del dev tap-gns3-cloud 
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">yields:<br><span width="500" alt="cnossprac1netsec-2023-03-09-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-09-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-09-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-09-1.png" style="max-width:100%"></span></li></ul></div><div class="heading-wrapper"><h4 data-heading="Add more interfaces to KVM bridge (virbr0)" class="heading" id="Add_more_interfaces_to_KVM_bridge_(virbr0)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Add more interfaces to KVM bridge (virbr0)<div class="heading-after">...</div></h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="problem is that interfaces from host are not exposed to GNS3 VM" class="heading" id="problem_is_that_interfaces_from_host_are_not_exposed_to_GNS3_VM"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>problem is that interfaces from host are not exposed to GNS3 VM<div class="heading-after">...</div></h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="Hence why GNS3 only sees this eth0 and not my actual enp4s0 ethernet adapter" class="heading" id="Hence_why_GNS3_only_sees_this_eth0_and_not_my_actual_enp4s0_ethernet_adapter"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Hence why GNS3 only sees this eth0 and not my actual enp4s0 ethernet adapter<div class="heading-after">...</div></h4><div class="heading-children"><div><ul><li data-line="0">tap interface on host to VM</li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">sudo ip tuntap add dev tap-gns3 mode tap user root #${whoami}
sudo ifconfig enp4s0 0.0.0.0 promisc up
sudo ip link set tap-gns3 up

sudo brctl addbr tap-gns3-cloud-bridge
sudo brctl addif tap-gns3-cloud-bridge tap-gns3
sudo brctl addif tap-gns3-cloud-bridge enp4s0

sudo ifconfig tap-gns3-cloud-bridge up

sudo ifconfig tap-gns3-cloud-bridge 192.168.3.6/24

#sudo ip addr add 192.168.3.6/24 dev tap-gns3
sudo route add -net 192.168.2.0 netmask 255.255.255.0 gw 192.168.3.6
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><p><code>ifconfig</code> should yield...</p></li><li data-line="2"><p>configuring GNS3 internal topology to have the same network as host</p></li></ul></div><div><pre><code>enable
config

! allow the router to receive pings and send an SMTP response back
! or rather, allow all traffic coming from the host's gateway
access-list 101 permit ip 192.168.2.0 0.0.0.255 any

! create a route in the router to the host PC 192.168.2.0/24 subnet
ip route 192.168.3.0 255.255.255.0 192.168.3.6

! add the IP for the router's interface
interface GigabitEthernet0/1
 ip address 192.168.2.5 255.255.255.0
!  
</code><button class="copy-code-button">Copy</button></pre></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="And at some point I decided this was getting out of hand" class="heading" id="And_at_some_point_I_decided_this_was_getting_out_of_hand"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>And at some point I decided this was getting out of hand<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0">so after spending more time than I should honestly have on trying to figure out why I can't create a tap interface straight into GNS3 from the Linux host</li><li data-line="1">it occurred to me that this is because I have to bridge the linux host's network into KVM where GNS3 lives<ul><li data-line="2">problem: GNS3 expects to have tap adapters connected to itself wherever it is running from</li><li data-line="3">When one would wish to connect an adapter from a Linux host on KVM into GNS3 they can try to add the linux adapter as I have added in this script</li></ul></li></ul></div><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">#!/bin/bash
echo "Creating TAP interfaces for GNS3 VM"
sudo ip tuntap add dev tap-gns3vm mode tap user $(whoami)
sudo ip link set tap-gns3vm up
sudo brctl addif virbr0 tap-gns3vm

# Tap interface for direct host connectivity
echo "Creating TAP interface for host"
sudo ip tuntap add dev tap-gns3host mode tap user $(whoami)
sudo ip addr add 192.168.3.1/24 dev tap-gns3host
sudo ip link set tap-gns3host up

# Give the interface and device some time to recognize each other
sleep 5s

echo "Starting gns3 vm..."
sudo qemu-system-x86_64 \
-name "GNS3 VM" \
-m 16384M \
-cpu host \
-enable-kvm \
-machine smm=off \
-boot order=c \
-drive file="/var/lib/libvirt/images/gns3-cnoss/GNS3 VM-disk001.qcow2",if=virtio,index=0,media=disk \
-drive file="/var/lib/libvirt/images/gns3-cnoss/GNS3 VM-disk002.qcow2",if=virtio,index=1,media=disk \
-device virtio-net-pci,netdev=nic0 -netdev tap,id=nic0,ifname=tap-gns3vm,script=no,downscript=no \
-device virtio-net-pci,netdev=nic1 -netdev tap,id=nic1,ifname=tap-gns3host,script=no,downscript=no

echo "GNS3 VM Should be started now"
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><p>Second problem:</p><ul><li data-line="1">GNS3 will see that I have added this new virtio-net-pci device, but not that it is a TAP adapter, it just sees that I have some mysterious new eth1 device inside of the VM</li><li data-line="2">for all reasons enigmatic to me, even after connecting a router in GNS3 to this TAP disguised as eth1, with an IP of 192.168.3.1 assigned outside and inside the VM and failing to ping anywhere after adding routes on the host, routes in the router etc etc</li></ul></li><li data-line="4"><p>I had a magical thought</p><div data-callout-metadata="" data-callout-fold="" data-callout="question" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">Why am I even trying to run this in KVM on Linux in the first place when the whole point of running GNS3 in a VM is to get access to KVM (mainly for windows users)??</div></div></div></li><li data-line="7"><p>so at this point I just scrapped the VM because this nested networking stuff was getting ridiculous just to have my topology talk to the host OS, and GNS3 was clearly designed to do this more easily on windows when it's running in VMWARE or Virtualbox</p></li></ul></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Layout Network Topology" class="heading" id="Layout_Network_Topology"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Layout Network Topology<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><p>essentially there will be some subnet connected to another VIA two routers in between.</p></li><li data-line="1"><p>there will be an IPsec VPN between the two routers</p></li><li data-line="2"><p>ipsec is chosen because it offers good access to cryptographic protocols for packets flowing through the routers vs. traditional tunnel routing<br>- <a data-tooltip-position="top" aria-label="https://www.cloudflare.com/learning/network-layer/what-is-ipsec/" rel="noopener" class="external-link" href="https://www.cloudflare.com/learning/network-layer/what-is-ipsec/" target="_blank">What is IPsec? | How IPsec VPNs work | Cloudflare</a><br>- transport mode is chosen here because of the ability to at least packet capture headers and see where packets are destined for<br>- <a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/vpn_modules/6342/vpn_cg/6342site3.html#wp1036221" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/vpn_modules/6342/vpn_cg/6342site3.html#wp1036221" target="_blank">Cisco IOS VPN Configuration Guide - Site-to-Site and Extranet VPN Business Scenarios</a><br>- if the routers are configured in full tunnel mode it is probably more secure, but also more restrictive and more difficult to troubleshoot<br><span width="400" alt="cnossprac1netsec-2023-03-12-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-12-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-12-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-12-1.png" style="max-width:100%"></span></p></li><li data-line="10"><p>Behind the second router will be an ASA firewall that will prevent any traffic that isn't VPN based from making its way into the secondary subnet</p></li><li data-line="12"><p>something like this will be the flow of traffic<br><span alt="cnossprac1netsec-2023-03-12.png" src="security/writeups/media/cnossprac1netsec-2023-03-12.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-12.png" src="security/writeups/media/cnossprac1netsec-2023-03-12.png"></span></p></li></ul></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="VPN Tunnel Configuration Trial and Error" class="heading" id="VPN_Tunnel_Configuration_Trial_and_Error"><div class="heading-before"></div>VPN Tunnel Configuration Trial and Error<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="ISAKMP, IPsec, Interfaces, Basic Router things" class="heading" id="ISAKMP,_IPsec,_Interfaces,_Basic_Router_things"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>ISAKMP, IPsec, Interfaces, Basic Router things<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0">interfaces and hostname, no annoying banners on the C7200 that present in IOSv</li><li data-line="1">establishing a first subnet</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token operator">!</span> <span class="token known-class-name class-name">Set</span> an identifiable hostname
hostname vpnrouter1
<span class="token operator">!</span>
<span class="token operator">!</span> <span class="token maybe-class-name">Interface</span> <span class="token keyword control-flow">for</span> the <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span><span class="token operator">/</span><span class="token number">24</span> subnet
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 no shut
 duplex auto
 speed auto
<span class="token operator">!</span>
<span class="token operator">!</span> <span class="token maybe-class-name">Interface</span> <span class="token keyword control-flow">for</span> the connection to the second router
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet1</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 no shut
 duplex auto
 speed auto
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">Internet Security Association and Key Management Protocol<ul><li data-line="1"><a data-tooltip-position="top" aria-label="https://en.wikipedia.org/wiki/Internet_Security_Association_and_Key_Management_Protocol" rel="noopener" class="external-link" href="https://en.wikipedia.org/wiki/Internet_Security_Association_and_Key_Management_Protocol" target="_blank">Internet Security Association and Key Management Protocol - Wikipedia</a></li></ul></li><li data-line="2">creates a new isakmp policy with priority 1</li><li data-line="3">using aes encryption, (Diffie hellman group 2)</li><li data-line="4">key is <code>pass@word1</code>, and is the key for the IP of the interface of Router 2</li><li data-line="5">telling the router that we're using ipsec and isakmp<ul><li data-line="6">this "mapping" here is called <code>routermap1</code></li><li data-line="7">the peer router is <code>192.168.1.2</code></li><li data-line="8">the transform set is <code>routerset1</code></li><li data-line="9">and this VPN routing will be applied to whatever access list is part of <code>101</code><ul><li data-line="10">in this case traffic from <code>10.10.10.0/24</code> will be allowed to <code>10.10.20.0/24</code></li></ul></li></ul></li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token operator">!</span> initial <span class="token constant">VPN</span> setup
crypto isakmp policy <span class="token number">1</span>
 encr aes
 authentication pre<span class="token operator">-</span>share
 group <span class="token number">2</span>
crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span> <span class="token maybe-class-name">Specifying</span> that the <span class="token constant">VPN</span> configuration is <span class="token maybe-class-name">IPsec</span> transform
crypto ipsec transform<span class="token operator">-</span><span class="token keyword">set</span> routerset1 esp<span class="token operator">-</span>aes esp<span class="token operator">-</span>sha<span class="token operator">-</span>hmac
<span class="token operator">!</span>
<span class="token operator">!</span>
crypto map routermap1 <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp
 <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset1
 match address <span class="token number">101</span>
<span class="token operator">!</span> permitting traffic <span class="token keyword module">from</span> inside network to other inside network
<span class="token operator">!</span>access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
<span class="token operator">!</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">we also need to provide a route in Router 1 that tells it where the 10.10.20.0/24 subnet actually is (it's behind the outbound interface of the second router)</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">ip route <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
ip route <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">apply crypto map to inbound interface of second router</li></ul></div><div><pre><code>interface GigabitEthernet1/0
crypto map routermap1
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="ISAKMP VPN tunnel verification" class="heading" id="ISAKMP_VPN_tunnel_verification"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>ISAKMP VPN tunnel verification<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Verify VPN Tunnel:</p></div><div><ol><li data-line="0"><p>Verify the status of the VPN tunnel with the "show crypto isakmp sa" command. This command displays the current state of the ISAKMP SA (Security Association) for the VPN tunnel. If the state is "QM_IDLE," it means that the IPsec SA (Security Association) is established:</p><p><code>R1# show crypto isakmp sa</code></p></li></ol></div><div><ul><li data-line="0">how it looks on solarputty on windows<br><span width="600" alt="cnossprac1netsec-2023-03-20-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-20-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-1.png" style="max-width:100%"></span></li></ul></div><div><ol start="2"><li data-line="0">Verify that the IPsec transform set is configured with the "show crypto ipsec transform-set" command. This command displays the transform sets that are configured for IPsec. If the transform set that is used by the VPN tunnel is configured for IPsec, it means that the VPN tunnel is using IPsec:</li></ol></div><div><p><code>R2# show crypto ipsec transform-set</code></p></div><div><p><span width="600" alt="cnossprac1netsec-2023-03-20-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-2.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-20-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-2.png" style="max-width:100%"></span></p></div></div></div><div class="heading-wrapper"><h2 data-heading="Intermediate Router (ISP, etc)" class="heading" id="Intermediate_Router_(ISP,_etc)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Intermediate Router (ISP, etc)<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0">considered having an intermediate router, but decided to scrap this since it wasn't really necessary</li></ul></div><div><pre><code>interface &lt;ISP Router interface connected to Router 1&gt;
 ip address &lt;IP address&gt;
!
interface &lt;ISP Router interface connected to Firewall&gt;
 ip address &lt;IP address&gt;
!
ip route 10.10.10.0 255.255.255.0 &lt;IP address of Router 1 interface&gt;
ip route 10.10.30.0 255.255.255.0 &lt;IP address of Firewall interface&gt;
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Router 2" class="heading" id="Router_2"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router 2<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0">router 2 is doing basically the same thing as router 1, except the second half</li><li data-line="1">it also needs to forward the tunnel onto the interface from the firewall</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token operator">!</span> <span class="token known-class-name class-name">Set</span> an identifiable hostname
hostname vpnrouter2
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 no shut
 duplex auto
 speed auto
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet1</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.50</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 no shut
 duplex auto
 speed auto
<span class="token operator">!</span>
crypto isakmp policy <span class="token number">1</span>
 encr aes
 authentication pre<span class="token operator">-</span>share
 group <span class="token number">2</span>
crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
<span class="token operator">!</span>crypto isakmp key pass@word1 address <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.254</span>
crypto isakmp key pass@word1 address <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.1</span>
<span class="token operator">!</span>
crypto ipsec transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2 esp<span class="token operator">-</span>aes esp<span class="token operator">-</span>sha<span class="token operator">-</span>hmac
<span class="token operator">!</span>
crypto map routermap2 <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp
 <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2
 match address <span class="token number">101</span>
<span class="token operator">!</span>
<span class="token operator">!</span> the permission <span class="token keyword">set</span> <span class="token keyword module">from</span> <span class="token maybe-class-name">Router</span> <span class="token number">1</span> but <span class="token keyword">in</span> reverse
<span class="token operator">!</span> access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
<span class="token operator">!</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">the route to 10.10.10.0/24</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">ip route <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">the route to 10.10.30.0/24</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">ip route <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.254</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">apply crypto map to interface attached to first router (peer)</li></ul></div><div><pre><code>interface GigabitEthernet0/0
 ip address 192.168.1.2 255.255.255.0
 duplex full
 speed 1000
 media-type gbic
 negotiation auto
 crypto map routermap2
!
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">the crypto map for the interface facing the firewall<ul><li data-line="1">same transform-set so that esp-aes gets carried forward</li></ul></li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">crypto map routermap2firewall <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp
 <span class="token keyword">set</span> peer <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.254</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2
 match address <span class="token number">101</span>

<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet1</span><span class="token operator">/</span><span class="token number">0</span>
 crypto map routermap2firewall
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">maybe I need an internal handover mapping as well</li></ul></div><div><pre><code>crypto map routermap2 internal 10 ipsec-isakmp
 set peer 10.10.20.50
 set transform-set routerset2
 match address 101
 

</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Quick Router 1 to Router 2 VPN encryption test" class="heading" id="Quick_Router_1_to_Router_2_VPN_encryption_test"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Quick Router 1 to Router 2 VPN encryption test<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0">if I ping across router 1 and router 2 via the 10.10.10.0/24 subnet, my traffic should show encapsulating security payload (ESP) and not show the origin IP of the originating ping request, indicating that the original traffic is being protected by the VPN tunnel</li></ul></div><div><p><span width="700" alt="cnossprac1netsec-2023-03-15.png" src="security/writeups/media/cnossprac1netsec-2023-03-15.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-15.png" src="security/writeups/media/cnossprac1netsec-2023-03-15.png" style="max-width:100%"></span></p></div></div></div><div class="heading-wrapper"><h2 data-heading="ASAv Firewall" class="heading" id="ASAv_Firewall"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>ASAv Firewall<div class="heading-after">...</div></h2><div class="heading-children"><div><p><a data-tooltip-position="top" aria-label="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asav/quick-start-book/asav-98-qsg/asav-config.html" rel="noopener" class="external-link" href="https://www.cisco.com/c/en/us/td/docs/security/asa/asa98/asav/quick-start-book/asav-98-qsg/asav-config.html" target="_blank">Cisco Adaptive Security Virtual Appliance (ASAv) Getting Started Guide, 9.8 - Configure the ASAv</a></p></div><div><p><a data-tooltip-position="top" aria-label="https://www.youtube.com/watch?v=YI-DeFRe-Bo" rel="noopener" class="external-link" href="https://www.youtube.com/watch?v=YI-DeFRe-Bo" target="_blank">Enable telnet asav</a></p></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">Most of the content under here is notes in general about how ASAv firewalls can be configured in a more complex way, because the initial layout had the ASAv firewall as something in the chain of VPN rather than being a VPN traffic filter in between the two subnets, the final configuration is simpler as is explained below</div></div></div></div><div><ul><li data-line="0">syntax is slightly different for firewalls,<ul><li data-line="1">terminal needs to be specified</li><li data-line="2"><code>pager</code> rather than <code>length</code></li></ul></li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">configure terminal
terminal pager <span class="token number">0</span>
</code><button class="copy-code-button">Copy</button></pre></div><div class="heading-wrapper"><h3 data-heading="enable telnet forcefully" class="heading" id="enable_telnet_forcefully"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>enable telnet forcefully<div class="heading-after">...</div></h3><div class="heading-children"><div><pre class="language-sh" tabindex="0"><code class="language-sh is-loaded">en
sh flash:
sh disk0:
cd coredumpinfo

copy coredump.cfg disk0:/use_ttyS0
</code><button class="copy-code-button">Copy</button></pre></div><div><p><span width="500" alt="cnossprac1netsec-2023-03-14-9.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-9.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-9.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-9.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0"><p>reboot<br><span width="500" alt="cnossprac1netsec-2023-03-14-10.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-10.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-10.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-10.png" style="max-width:100%"></span></p></li><li data-line="3"><p>now telnet console can be used for admin instead of VNC<br><span width="500" alt="cnossprac1netsec-2023-03-14-11.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-11.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-11.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-11.png" style="max-width:100%"></span></p></li><li data-line="7"><p>initial configuration dialogue</p></li><li data-line="8"><p>security level of 100 (trusted needs to be set in order to telnet into it)<br><span width="400" alt="cnossprac1netsec-2023-03-14-8.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-8.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-8.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-8.png" style="max-width:100%"></span></p></li></ul></div></div></div><div class="heading-wrapper"><h3 data-heading="some user credentials notes" class="heading" id="some_user_credentials_notes"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>some user credentials notes<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0"><p><code>username admin password admin privilege 15</code></p></li><li data-line="1"><p><code>enable password admin</code></p></li><li data-line="3"><p>On G0/0 I'm calling the name of traffic coming from out side of the firewall external</p><ul><li data-line="4">and on G0/1 the traffic is "internal" for 10.10.20.0/24</li></ul></li><li data-line="5"><p>security-level 0 just means that traffic coming from this outside interface is less trusted in general</p></li><li data-line="7"><p>enable communication with firewall over management interface (KVM style subnetting)</p><ul><li data-line="8">this was mostly to test if looking at the web interface was doable, turns out it wasn't really</li></ul></li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token keyword">interface</span> <span class="token class-name">Management0</span><span class="token operator">/</span><span class="token number">0</span>
ip address <span class="token number">192.168</span><span class="token number">.122</span><span class="token number">.50</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
no shutdown
exit
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="ASA routers have something called `security-level`" class="heading" id="ASA_routers_have_something_called_`security-level`"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>ASA routers have something called <code>security-level</code><div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0">which determines the priority of traffic flow safety across interfaces</li><li data-line="1">turn interfaces online</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 nameif leftside
 security<span class="token operator">-</span>level <span class="token number">100</span>
 ip address <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.254</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 no shut
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">1</span>
 nameif rightside
 security<span class="token operator">-</span>level <span class="token number">100</span>
 ip address <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 no shut
<span class="token operator">!</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="A mockup of something that would perhaps work if the ASAv was part of the VPN chain" class="heading" id="A_mockup_of_something_that_would_perhaps_work_if_the_ASAv_was_part_of_the_VPN_chain"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>A mockup of something that would perhaps work if the ASAv was part of the VPN chain<div class="heading-after">...</div></h3><div class="heading-children"><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">this is grossly overcomplicated, but it's still in here because it was part of the learning experience, didn't use this but it was interesting to see what the additional crypto mapping capabilities of ASAv are</div></div></div></div><div><ul><li data-line="0"><p>ASA firewalls can have crypto mappings, etc, applied in a similar fashion to how they are applied to routers</p></li><li data-line="2"><p>network objects refer to specific subnets</p><ul><li data-line="3">in this scenario the two subnets that are being paired via VPN are<ul><li data-line="4">10.10.10.0/24 -- 10.10.30.0/24</li></ul></li><li data-line="5">An ACL is defined to permit traffic between the two subnets</li><li data-line="6">the tunnel group is the initiating IP of the tunnel start point</li><li data-line="7">they share that key defined earlier , doesn't matter much what it is<code>pass@word1</code></li></ul></li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">object network obj_10<span class="token punctuation">.</span><span class="token number">10.10</span><span class="token number">.0</span>
subnet <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
<span class="token operator">!</span>
object network obj_10<span class="token punctuation">.</span><span class="token number">10.30</span><span class="token number">.0</span>
subnet <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
<span class="token operator">!</span>
access<span class="token operator">-</span>list <span class="token constant">VPN_ACL</span> extended permit ip object obj_10<span class="token punctuation">.</span><span class="token number">10.10</span><span class="token number">.0</span> object obj_10<span class="token punctuation">.</span><span class="token number">10.30</span><span class="token number">.0</span>
<span class="token operator">!</span> tunnel group peered <span class="token keyword module">from</span> original router exit point
<span class="token operator">!</span>
<span class="token operator">!</span>tunnel<span class="token operator">-</span>group <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> ipsec<span class="token operator">-</span>attributes
<span class="token operator">!</span>tunnel<span class="token operator">-</span>group <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> type ipsec<span class="token operator">-</span>l2l
<span class="token operator">!</span>pre<span class="token operator">-</span>shared<span class="token operator">-</span>key pass@word1

tunnel<span class="token operator">-</span>group <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.50</span> type ipsec<span class="token operator">-</span>l2l
tunnel<span class="token operator">-</span>group <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.50</span> ipsec<span class="token operator">-</span>attributes
pre<span class="token operator">-</span>shared<span class="token operator">-</span>key pass@word1


<span class="token operator">!</span> attaching parameters to crypto map
crypto map <span class="token constant">VPN_MAP</span> <span class="token number">10</span> match address <span class="token constant">VPN_ACL</span>
<span class="token operator">!</span>crypto map <span class="token constant">VPN_MAP</span> <span class="token number">10</span> <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
crypto map <span class="token constant">VPN_MAP</span> <span class="token number">10</span> <span class="token keyword">set</span> peer <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.50</span>

crypto ipsec transform<span class="token operator">-</span><span class="token keyword">set</span> asafirewall esp<span class="token operator">-</span>aes esp<span class="token operator">-</span>sha<span class="token operator">-</span>hmac
crypto map <span class="token constant">VPN_MAP</span> <span class="token number">10</span> <span class="token keyword">set</span> ikev1 transform<span class="token operator">-</span><span class="token keyword">set</span> asafirewall
crypto map <span class="token constant">VPN_MAP</span> <span class="token keyword">interface</span> <span class="token class-name">leftside</span>

<span class="token operator">!</span> maybe need <span class="token keyword">interface</span> <span class="token class-name">rightside</span><span class="token operator">?</span>
crypto map <span class="token constant">VPN_MAP</span> <span class="token keyword">interface</span> <span class="token class-name">leftside</span>
crypto map <span class="token constant">VPN_MAP</span> <span class="token keyword">interface</span> <span class="token class-name">rightside</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">need to add additional access lists for traffic between all subnets</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">object network obj_10<span class="token punctuation">.</span><span class="token number">10.20</span><span class="token number">.0</span>
 subnet <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
<span class="token operator">!</span>
access<span class="token operator">-</span>list <span class="token constant">VPN_ACL</span> extended permit ip object obj_10<span class="token punctuation">.</span><span class="token number">10.10</span><span class="token number">.0</span> object obj_10<span class="token punctuation">.</span><span class="token number">10.20</span><span class="token number">.0</span>
access<span class="token operator">-</span>list <span class="token constant">VPN_ACL</span> extended permit ip object obj_10<span class="token punctuation">.</span><span class="token number">10.20</span><span class="token number">.0</span> object obj_10<span class="token punctuation">.</span><span class="token number">10.10</span><span class="token number">.0</span>
<span class="token operator">!</span>
crypto map <span class="token constant">VPN_MAP</span> <span class="token number">10</span> match address <span class="token constant">VPN_ACL</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0">can view that the crypto map is setup on router correctly with <code>show crypto map VPN_MAP</code></li><li data-line="1">can view similar on ASAv with<ul><li data-line="2"><code>show run crypto map</code></li><li data-line="3"><code>show run crypto isakmp sa</code></li><li data-line="4">`show crypto ipsec sa</li></ul></li></ul></div><div><p><span width="500" alt="cnossprac1netsec-2023-03-15-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-15-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-1.png" style="max-width:100%"></span></p></div><div class="heading-wrapper"><h4 data-heading="Some notes on failing Interacting with the ASAv web gui" class="heading" id="Some_notes_on_failing_Interacting_with_the_ASAv_web_gui"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Some notes on failing Interacting with the ASAv web gui<div class="heading-after">...</div></h4><div class="heading-children"><div><p><a data-tooltip-position="top" aria-label="https://adriancitu.com/2015/11/02/how-to-run-cisco-asdm-as-a-java-web-start-application-on-ubuntu/" rel="noopener" class="external-link" href="https://adriancitu.com/2015/11/02/how-to-run-cisco-asdm-as-a-java-web-start-application-on-ubuntu/" target="_blank">How to run Cisco ASDM as a Java Web Start application – Adventures in the programming jungle</a></p></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">in the end decided not to use this at all and it was kind of a waste of time</div></div></div></div><div><ul><li data-line="0"><p>this is using some ancient java webstart stuff that isn't really a thing any more....</p></li><li data-line="2"><p>had to install this</p></li></ul></div><div><pre><code>sudo apt install icedtea-netx
</code><button class="copy-code-button">Copy</button></pre></div><div><ul><li data-line="0"><p>had to manually edit the HTML of the thing to allow me to even get the file to run this java webapp<br><span width="300" alt="cnossprac1netsec-2023-03-14.png" src="security/writeups/media/cnossprac1netsec-2023-03-14.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14.png" src="security/writeups/media/cnossprac1netsec-2023-03-14.png" style="max-width:100%"></span></p></li><li data-line="3"><p>which would download a file which I can run with</p></li></ul></div><div><pre><code>javaws ./asdm.jnlp
</code><button class="copy-code-button">Copy</button></pre></div><div><p><span width="400" alt="cnossprac1netsec-2023-03-14-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-1.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-1.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-1.png" style="max-width:100%"></span></p></div><div><p><span width="400" alt="cnossprac1netsec-2023-03-14-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-2.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-2.png" style="max-width:100%"></span></p></div><div><p><span width="700" alt="cnossprac1netsec-2023-03-14-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-3.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-3.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0"><p>oh boy<br><span width="700" alt="cnossprac1netsec-2023-03-14-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-4.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-4.png" style="max-width:100%"></span></p></li><li data-line="4"><p>so uh... maybe?? <a data-tooltip-position="top" aria-label="https://openwebstart.com/download/" rel="noopener" class="external-link" href="https://openwebstart.com/download/" target="_blank">Download - openwebstart.com</a></p></li><li data-line="5"><p>icedtea is super deprecated so I'm going to try to get into it with this and see if that works</p></li></ul></div><div><p><span width="600" alt="cnossprac1netsec-2023-03-14-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-5.png" style="max-width:100%"></span></p></div><div><p><span width="600" alt="cnossprac1netsec-2023-03-14-6.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-6.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-6.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-6.png" style="max-width:100%"></span></p></div><div><ul><li data-line="0"><p>ah<br><span width="600" alt="cnossprac1netsec-2023-03-14-7.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-7.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-14-7.png" src="security/writeups/media/cnossprac1netsec-2023-03-14-7.png" style="max-width:100%"></span></p></li><li data-line="3"><p>I played with this for.... quite a while and decided it wasn't worth it</p></li></ul></div></div></div></div></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="The actually implemented topology after a lot of trial and error" class="heading" id="The_actually_implemented_topology_after_a_lot_of_trial_and_error"><div class="heading-before"></div>The actually implemented topology after a lot of trial and error<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Scheme for site-to-site VPN" class="heading" id="Scheme_for_site-to-site_VPN"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Scheme for site-to-site VPN<div class="heading-after">...</div></h2><div class="heading-children"><div><ul><li data-line="0"><p>first test was to get a site to site VPN working with no firewall<br><span alt="cnossprac1netsec-2023-03-15-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-2.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-15-2.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-2.png"></span></p></li><li data-line="3"><p>another example of site-to-site without IOSvL2 switches<br><span width="600" alt="cnossprac1netsec-2023-03-20-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-3.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-20-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-3.png" style="max-width:100%"></span></p></li><li data-line="7"><p>this was configured roughly the same as the above notes with ISAKMP and trial and error</p></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Router 1" class="heading" id="Router_1"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router 1<div class="heading-after">...</div></h2><div class="heading-children"><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">crypto isakmp policy <span class="token number">1</span>
 encr aes
 authentication pre<span class="token operator">-</span>share
 group <span class="token number">2</span>
crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
crypto ipsec transform<span class="token operator">-</span><span class="token keyword">set</span> routerset1 esp<span class="token operator">-</span>aes esp<span class="token operator">-</span>sha<span class="token operator">-</span>hmac 
<span class="token operator">!</span>
crypto map routermap1 <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp 
 <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset1 
 match address <span class="token number">101</span>
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 duplex full
 speed <span class="token number">1000</span>
 media<span class="token operator">-</span>type gbic
 negotiation auto
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet1</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 negotiation auto
 crypto map routermap1
<span class="token operator">!</span>
ip route <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
<span class="token operator">!</span>
access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Router 2" class="heading" id="Router_2"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router 2<div class="heading-after">...</div></h2><div class="heading-children"><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">crypto isakmp policy <span class="token number">1</span>
 encr aes
 authentication pre<span class="token operator">-</span>share
 group <span class="token number">2</span>
crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
crypto ipsec transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2 esp<span class="token operator">-</span>aes esp<span class="token operator">-</span>sha<span class="token operator">-</span>hmac 
<span class="token operator">!</span>
crypto map routermap2 <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp 
 <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2 
 match address <span class="token number">101</span>
<span class="token operator">!</span>
crypto map routermap2firewall <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp 
 <span class="token keyword">set</span> peer <span class="token number">10.10</span><span class="token number">.20</span><span class="token number">.254</span>
 <span class="token keyword">set</span> peer <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.1</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2 
 match address <span class="token number">101</span>
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 duplex full
 speed <span class="token number">1000</span>
 media<span class="token operator">-</span>type gbic
 negotiation auto
 crypto map routermap2
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet1</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 negotiation auto
<span class="token operator">!</span>
ip route <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
<span class="token operator">!</span>
access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
</code><button class="copy-code-button">Copy</button></pre></div><div class="heading-wrapper"><h3 data-heading="VPN tested by wireshark packet capture" class="heading" id="VPN_tested_by_wireshark_packet_capture"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>VPN tested by wireshark packet capture<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0"><p>same as above in the quick configuration test</p></li><li data-line="2"><p>secure as long as the icmp pings are encapsulated by the ESP protocol and the originating IP is not known to the wireshark sniffer on line across the routers<br><span width="700" alt="cnossprac1netsec-2023-03-15.png" src="security/writeups/media/cnossprac1netsec-2023-03-15.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-15.png" src="security/writeups/media/cnossprac1netsec-2023-03-15.png" style="max-width:100%"></span></p></li><li data-line="6"><p>what the same test looks like from solarputty instead of linux terminal telnet<br><span width="800" alt="cnossprac1netsec-2023-03-20-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-4.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-20-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-20-4.png" style="max-width:100%"></span></p></li></ul></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Scheme site-to-site with intermediary firewall" class="heading" id="Scheme_site-to-site_with_intermediary_firewall"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Scheme site-to-site with intermediary firewall<div class="heading-after">...</div></h2><div class="heading-children"><div><p><span alt="-2023-03-15-3.png" src="security/writeups/media/-2023-03-15-3.png" class="internal-embed media-embed image-embed is-loaded"><img alt="-2023-03-15-3.png" src="security/writeups/media/-2023-03-15-3.png"></span></p></div><div><ul><li data-line="0">in the site to site with intermediary firewall configuration some things were modified about peers and routes, but it was mostly the same for VPN setup</li></ul></div><div class="heading-wrapper"><h3 data-heading="Router 1" class="heading" id="Router_1"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router 1<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0">these things were altered to make the Router 1 from above work with a firewall in between</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">no crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span>

crypto map routermap1 <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp 
  <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span>

no ip route <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
ip route <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span>

ip route <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Firewall" class="heading" id="Firewall"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Firewall<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0">the firewall was configured like so<ul><li data-line="1">this firewall is simply filtering traffic from the less trusted outward network to the more trusted inward network</li><li data-line="2">this was opted for inside of trying a complicted crypto map that would make the firewall part of the VPN tunnel and lots of trial and error proved making that work difficult</li></ul></li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">hostname vpn<span class="token operator">-</span>firewall
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 nameif inside
 security<span class="token operator">-</span>level <span class="token number">100</span>
 ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">1</span>
 nameif outside
 security<span class="token operator">-</span>level <span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
<span class="token operator">!</span>
access<span class="token operator">-</span>list out extended permit icmp host <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> 
access<span class="token operator">-</span>list out extended permit udp host <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> eq isakmp 
access<span class="token operator">-</span>list out extended permit esp host <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> 
<span class="token operator">!</span> access<span class="token operator">-</span>group out <span class="token keyword">in</span> <span class="token keyword">interface</span> <span class="token class-name">outside</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Router 2" class="heading" id="Router_2"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router 2<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0">router 2 is the same as above with these small changes</li></ul></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">no crypto map routermap2firewall <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp 

<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
ip address <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h3 data-heading="Ping test across check for encapsulated packets" class="heading" id="Ping_test_across_check_for_encapsulated_packets"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Ping test across check for encapsulated packets<div class="heading-after">...</div></h3><div class="heading-children"><div><ul><li data-line="0"><p>ping across from one virtual PC to another<br><span alt="-2023-03-15-2.png" src="-2023-03-15-2.png" class="internal-embed is-loaded file-embed mod-empty">"-2023-03-15-2.png" is not created yet. Click to create.</span></p></li><li data-line="3"><p>PC1<br><span width="600" alt="cnossprac1netsec-2023-03-15-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-3.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-15-3.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-3.png" style="max-width:100%"></span></p></li><li data-line="6"><p>intermediate wireshark capture on both ends of firewall<br><span width="800" alt="cnossprac1netsec-2023-03-15-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-4.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-15-4.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-4.png" style="max-width:100%"></span></p></li><li data-line="9"><p>received data on PC2<br><span width="600" alt="cnossprac1netsec-2023-03-15-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-5.png" class="internal-embed media-embed image-embed is-loaded"><img alt="cnossprac1netsec-2023-03-15-5.png" src="security/writeups/media/cnossprac1netsec-2023-03-15-5.png" style="max-width:100%"></span></p></li></ul></div></div></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Some full configuration dumps of Router 1 , Router 2, and the Firewall" class="heading" id="Some_full_configuration_dumps_of_Router_1_,_Router_2,_and_the_Firewall"><div class="heading-before"></div>Some full configuration dumps of Router 1 , Router 2, and the Firewall<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Router 1" class="heading" id="Router_1"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router 1<div class="heading-after">...</div></h2><div class="heading-children"><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token constant">R1</span><span class="token operator">-</span><span class="token constant">C1</span>#show running<span class="token operator">-</span>config 
<span class="token maybe-class-name">Building</span> configuration<span class="token spread operator">...</span>

<span class="token maybe-class-name">Current</span> configuration <span class="token operator">:</span> <span class="token number">1657</span> bytes
<span class="token operator">!</span>
upgrade fpd auto
version <span class="token number">12.4</span>
service timestamps debug datetime msec
service timestamps log datetime msec
no service password<span class="token operator">-</span>encryption
<span class="token operator">!</span>
hostname <span class="token constant">R1</span><span class="token operator">-</span><span class="token constant">C1</span>
<span class="token operator">!</span>
boot<span class="token operator">-</span>start<span class="token operator">-</span>marker
boot<span class="token operator">-</span>end<span class="token operator">-</span>marker
<span class="token operator">!</span>
logging message<span class="token operator">-</span>counter syslog
<span class="token operator">!</span>
no aaa <span class="token keyword">new</span><span class="token operator">-</span>model
ip source<span class="token operator">-</span>route
no ip icmp rate<span class="token operator">-</span>limit unreachable
ip cef
<span class="token operator">!</span>
<span class="token operator">!</span>
no ip domain lookup
no ipv6 cef
<span class="token operator">!</span>
multilink bundle<span class="token operator">-</span>name authenticated
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
archive
 log config
  hidekeys
<span class="token operator">!</span> 
<span class="token operator">!</span>
crypto isakmp policy <span class="token number">1</span>
 encr aes
 authentication pre<span class="token operator">-</span>share
 group <span class="token number">2</span>
crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
crypto ipsec transform<span class="token operator">-</span><span class="token keyword">set</span> routerset1 esp<span class="token operator">-</span>aes esp<span class="token operator">-</span>sha<span class="token operator">-</span>hmac 
<span class="token operator">!</span>
crypto map routermap1 <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp 
 <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset1 
 match address <span class="token number">101</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
ip tcp synwait<span class="token operator">-</span>time <span class="token number">5</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">Ethernet0</span><span class="token operator">/</span><span class="token number">0</span>
 no ip address
 shutdown
 duplex auto
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 duplex full
 speed <span class="token number">1000</span>
 media<span class="token operator">-</span>type gbic
 negotiation auto
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet1</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 negotiation auto
 crypto map routermap1
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet2</span><span class="token operator">/</span><span class="token number">0</span>
 no ip address
 shutdown
 negotiation auto
<span class="token operator">!</span>
ip forward<span class="token operator">-</span>protocol nd
ip route <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span>
ip route <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span>
no ip http server
no ip http secure<span class="token operator">-</span>server
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
no cdp log mismatch duplex
<span class="token operator">!</span>
control<span class="token operator">-</span>plane
<span class="token operator">!</span>
gatekeeper
 shutdown
<span class="token operator">!</span>
<span class="token operator">!</span>
line con <span class="token number">0</span>
 exec<span class="token operator">-</span>timeout <span class="token number">0</span> <span class="token number">0</span>
 privilege level <span class="token number">15</span>
 logging synchronous
 stopbits <span class="token number">1</span>
line aux <span class="token number">0</span>
 exec<span class="token operator">-</span>timeout <span class="token number">0</span> <span class="token number">0</span>
 privilege level <span class="token number">15</span>
 logging synchronous
 stopbits <span class="token number">1</span>
line vty <span class="token number">0</span> <span class="token number">4</span>
 login
<span class="token operator">!</span>
end

</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Firewall" class="heading" id="Firewall"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Firewall<div class="heading-after">...</div></h2><div class="heading-children"><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded">vpn<span class="token operator">-</span>firewall# show running<span class="token operator">-</span>config 
<span class="token operator">:</span> <span class="token maybe-class-name">Saved</span>

<span class="token operator">:</span> 
<span class="token operator">:</span> <span class="token maybe-class-name">Serial</span> <span class="token known-class-name class-name">Number</span><span class="token operator">:</span> 9AAADS8T1G9
<span class="token operator">:</span> <span class="token maybe-class-name">Hardware</span><span class="token operator">:</span>   <span class="token maybe-class-name">ASAv</span><span class="token punctuation">,</span> <span class="token number">2048</span> <span class="token constant">MB</span> <span class="token constant">RAM</span><span class="token punctuation">,</span> <span class="token constant">CPU</span> <span class="token maybe-class-name">Unknown</span> <span class="token maybe-class-name">Model</span> <span class="token number">2304</span> <span class="token literal-property property">MHz</span>
<span class="token operator">:</span>
<span class="token constant">ASA</span> <span class="token maybe-class-name">Version</span> <span class="token number">9.8</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> 
<span class="token operator">!</span>
hostname vpn<span class="token operator">-</span>firewall
enable password $sha512$5000$Jy<span class="token operator">/</span><span class="token maybe-class-name">TNZdjhOAE58YQ1g</span><span class="token operator">+</span><span class="token constant">FXA</span><span class="token operator">==</span>$IqQfAVlwNoZrSCfX3b1zYQ<span class="token operator">==</span> pbkdf2
xlate per<span class="token operator">-</span>session deny tcp any4 any4
xlate per<span class="token operator">-</span>session deny tcp any4 any6
xlate per<span class="token operator">-</span>session deny tcp any6 any4
xlate per<span class="token operator">-</span>session deny tcp any6 any6
xlate per<span class="token operator">-</span>session deny udp any4 any4 eq domain
xlate per<span class="token operator">-</span>session deny udp any4 any6 eq domain
xlate per<span class="token operator">-</span>session deny udp any6 any4 eq domain
xlate per<span class="token operator">-</span>session deny udp any6 any6 eq domain
names

<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 nameif inside
 security<span class="token operator">-</span>level <span class="token number">100</span>
 ip address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">1</span>
 nameif outside
 security<span class="token operator">-</span>level <span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.2</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> 
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">2</span>
 shutdown
 no nameif
 no security<span class="token operator">-</span>level
 no ip address
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">3</span>
 shutdown
 no nameif
 no security<span class="token operator">-</span>level
 no ip address
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">4</span>
 shutdown
 no nameif
 no security<span class="token operator">-</span>level
 no ip address
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">5</span>
 shutdown
 no nameif
 no security<span class="token operator">-</span>level
 no ip address
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">6</span>
 shutdown
 no nameif
 no security<span class="token operator">-</span>level
 no ip address
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">Management0</span><span class="token operator">/</span><span class="token number">0</span>
 shutdown
 no nameif
 no security<span class="token operator">-</span>level
 no ip address
<span class="token operator">!</span>
ftp mode passive
access<span class="token operator">-</span>list out extended permit icmp host <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> 
access<span class="token operator">-</span>list out extended permit udp host <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> eq isakmp 
access<span class="token operator">-</span>list out extended permit esp host <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> host <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span> 
pager lines <span class="token number">23</span>
mtu inside <span class="token number">1500</span>
mtu outside <span class="token number">1500</span>
no failover
no monitor<span class="token operator">-</span><span class="token keyword">interface</span> <span class="token class-name">service</span><span class="token operator">-</span>module 
icmp unreachable rate<span class="token operator">-</span>limit <span class="token number">1</span> burst<span class="token operator">-</span>size <span class="token number">1</span>
no asdm history enable
arp timeout <span class="token number">14400</span>
no arp permit<span class="token operator">-</span>nonconnected
arp rate<span class="token operator">-</span>limit <span class="token number">8192</span>
access<span class="token operator">-</span>group out <span class="token keyword">in</span> <span class="token keyword">interface</span> <span class="token class-name">outside</span>
timeout xlate <span class="token number">3</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>
timeout pat<span class="token operator">-</span>xlate <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">30</span>
timeout conn <span class="token number">1</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> half<span class="token operator">-</span>closed <span class="token number">0</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">00</span> udp <span class="token number">0</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">00</span> sctp <span class="token number">0</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">00</span> icmp <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">02</span>
timeout sunrpc <span class="token number">0</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">00</span> h323 <span class="token number">0</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">00</span> h225 <span class="token number">1</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span> mgcp <span class="token number">0</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">00</span> mgcp<span class="token operator">-</span>pat <span class="token number">0</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">00</span>
timeout sip <span class="token number">0</span><span class="token operator">:</span><span class="token number">30</span><span class="token operator">:</span><span class="token number">00</span> sip_media <span class="token number">0</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">00</span> sip<span class="token operator">-</span>invite <span class="token number">0</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">00</span> sip<span class="token operator">-</span>disconnect <span class="token number">0</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">00</span>
timeout sip<span class="token operator">-</span>provisional<span class="token operator">-</span>media <span class="token number">0</span><span class="token operator">:</span><span class="token number">02</span><span class="token operator">:</span><span class="token number">00</span> uauth <span class="token number">0</span><span class="token operator">:</span><span class="token number">05</span><span class="token operator">:</span><span class="token number">00</span> absolute
timeout tcp<span class="token operator">-</span>proxy<span class="token operator">-</span>reassembly <span class="token number">0</span><span class="token operator">:</span><span class="token number">01</span><span class="token operator">:</span><span class="token number">00</span>
timeout floating<span class="token operator">-</span>conn <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">00</span>
timeout conn<span class="token operator">-</span>holddown <span class="token number">0</span><span class="token operator">:</span><span class="token number">00</span><span class="token operator">:</span><span class="token number">15</span>
timeout igp stale<span class="token operator">-</span>route <span class="token number">0</span><span class="token operator">:</span><span class="token number">01</span><span class="token operator">:</span><span class="token number">10</span>
user<span class="token operator">-</span>identity <span class="token keyword module">default</span><span class="token operator">-</span>domain <span class="token constant">LOCAL</span>
aaa authentication login<span class="token operator">-</span>history
no snmp<span class="token operator">-</span>server <span class="token dom variable">location</span>
no snmp<span class="token operator">-</span>server contact
crypto ipsec security<span class="token operator">-</span>association pmtu<span class="token operator">-</span>aging infinite
crypto ca trustpoint _SmartCallHome_ServerCA
 no validation<span class="token operator">-</span>usage
 crl configure
crypto ca trustpool policy
 auto<span class="token operator">-</span><span class="token keyword module">import</span>
crypto ca certificate chain _SmartCallHome_ServerCA
 certificate ca 18dad19e267de8bb4a2158cdcc6b3b4a
    308204d3 308203bb a0030201 <span class="token number">02021018</span> dad19e26 7de8bb4a 2158cdcc 6b3b4a30 
    0d06092a 864886f7 0d010105 <span class="token number">05003081</span> ca310b30 <span class="token number">09060355</span> <span class="token number">04061302</span> <span class="token number">55533117</span> 
    <span class="token number">30150603</span> 55040a13 <span class="token number">0e566572</span> <span class="token number">69536967</span> 6e2c2049 6e632e31 1f301d06 0355040b 
    <span class="token number">13165665</span> <span class="token number">72695369</span> <span class="token number">676e2054</span> <span class="token number">72757374</span> <span class="token number">204e6574</span> 776f726b 313a3038 <span class="token number">06035504</span> 
    0b133128 <span class="token number">63292032</span> <span class="token number">30303620</span> <span class="token number">56657269</span> 5369676e 2c20496e 632e202d 20466f72 
    <span class="token number">20617574</span> 686f7269 7a656420 <span class="token number">75736520</span> 6f6e6c79 <span class="token number">31453043</span> <span class="token number">06035504</span> 03133c56 
    <span class="token number">65726953</span> <span class="token number">69676e20</span> 436c6173 <span class="token number">73203320</span> 5075626c <span class="token number">69632050</span> 72696d61 <span class="token number">72792043</span> 
    <span class="token number">65727469</span> <span class="token number">66696361</span> 74696f6e <span class="token number">20417574</span> 686f7269 7479202d <span class="token number">20473530</span> 1e170d30 
    <span class="token number">36313130</span> <span class="token number">38303030</span> 3030305a 170d3336 <span class="token number">30373136</span> <span class="token number">32333539</span> 35395a30 81ca310b 
    <span class="token number">30090603</span> <span class="token number">55040613</span> <span class="token number">02555331</span> <span class="token number">17301506</span> 0355040a <span class="token number">130e5665</span> <span class="token number">72695369</span> 676e2c20 
    496e632e 311f301d <span class="token number">06035504</span> 0b131656 <span class="token number">65726953</span> <span class="token number">69676e20</span> <span class="token number">54727573</span> <span class="token number">74204e65</span> 
    74776f72 6b313a30 <span class="token number">38060355</span> 040b1331 <span class="token number">28632920</span> <span class="token number">32303036</span> <span class="token number">20566572</span> <span class="token number">69536967</span> 
    6e2c2049 6e632e20 2d20466f <span class="token number">72206175</span> 74686f72 697a6564 <span class="token number">20757365</span> 206f6e6c 
    <span class="token number">79314530</span> <span class="token number">43060355</span> 0403133c <span class="token number">56657269</span> 5369676e 20436c61 <span class="token number">73732033</span> <span class="token number">20507562</span> 
    6c696320 5072696d <span class="token number">61727920</span> <span class="token number">43657274</span> <span class="token number">69666963</span> 6174696f <span class="token number">6e204175</span> 74686f72 
    <span class="token number">69747920</span> 2d204735 <span class="token number">30820122</span> 300d0609 2a864886 f70d0101 <span class="token number">01050003</span> 82010f00 
    3082010a <span class="token number">02820101</span> 00af2408 08297a35 9e600caa e74b3b4e dc7cbc3c 451cbb2b 
    e0fe2902 f95708a3 <span class="token number">64851527</span> f5f1adc8 31895d22 e82aaaa6 42b38ff8 b955b7b1 
    b74bb3fe 8f7e0757 ecef43db <span class="token number">66621561</span> cf600da4 d8def8e0 c362083d 5413eb49 
    ca595485 26e52b8f 1b9febf5 a191c233 49d84363 6a524bd2 8fe87051 4dd18969 
    7bc770f6 b3dc1274 db7b5d4b 56d396bf 1577a1b0 f4a225f2 af1c9267 18e5f406 
    04ef90b9 e400e4dd 3ab519ff 02baf43c eee08beb 378becf4 d7acf2f6 f03dafdd 
    <span class="token number">75913319</span> 1d1c40cb <span class="token number">74241921</span> 93d914fe ac2a52c7 8fd50449 e48d6347 883c6983 
    cbfe47bd 2b7e4fc5 95ae0e9d d4d143c0 <span class="token number">6773e314</span> 087ee53f 9f73b833 0acf5d3f 
    3487968a ee53e825 <span class="token number">15020301</span> 0001a381 b23081af 300f0603 551d1301 01ff0405 
    <span class="token number">30030101</span> ff300e06 03551d0f 0101ff04 <span class="token number">04030201</span> 06306d06 082b0601 <span class="token number">05050701</span> 
    0c046130 5fa15da0 5b305930 <span class="token number">57305516</span> 09696d61 67652f67 <span class="token number">69663021</span> 301f3007 
    06052b0e 03021a04 148fe5d3 1a86ac8d 8e6bc3cf 806ad448 182c7b19 <span class="token number">2e302516</span> 
    <span class="token number">23687474</span> 703a2f2f 6c6f676f <span class="token number">2e766572</span> <span class="token number">69736967</span> 6e2e636f 6d2f7673 6c6f676f 
    <span class="token number">2e676966</span> 301d0603 551d0e04 1604147f d365a7c2 ddecbbf0 3009f343 39fa02af 
    <span class="token number">33313330</span> 0d06092a 864886f7 0d010105 <span class="token number">05000382</span> <span class="token number">01010093</span> 244a305f 62cfd81a 
    982f3dea dc992dbd 77f6a579 2238ecc4 a7a07812 ad620e45 7064c5e7 97662d98 
    097e5faf d6cc2865 f201aa08 1a47def9 f97c925a 0869200d d93e6d6e 3c0d6ed8 
    e6069140 18b9f8c1 eddfdb41 aae09620 c9cd6415 3881c994 eea28429 0b136f8e 
    db0cdd25 02dba48b 1944d241 7a05694a 584f60ca 7e826a0b 02aa2517 39b5db7f 
    e784652a 958abd86 de5e8116 832d10cc defda882 2a6d281f 0d0bc4e5 e71a2619 
    e1f4116f 10b595fc e7420532 dbce9d51 5e28b69e 85d35bef a57d4540 728eb70e 
    6b0e06fb <span class="token number">33354871</span> b89d278b c4655f0d 86769c44 7af6955c f65d3208 33a454b6 
    183f685c f2424a85 3854835f d1e82cf2 ac11d6a8 ed636a
  quit
telnet timeout <span class="token number">5</span>
ssh stricthostkeycheck
ssh timeout <span class="token number">5</span>
ssh key<span class="token operator">-</span>exchange group dh<span class="token operator">-</span>group1<span class="token operator">-</span>sha1
console timeout <span class="token number">0</span>
threat<span class="token operator">-</span>detection basic<span class="token operator">-</span>threat
threat<span class="token operator">-</span>detection statistics access<span class="token operator">-</span>list
no threat<span class="token operator">-</span>detection statistics tcp<span class="token operator">-</span>intercept
dynamic<span class="token operator">-</span>access<span class="token operator">-</span>policy<span class="token operator">-</span>record <span class="token maybe-class-name">DfltAccessPolicy</span>
<span class="token operator">!</span>
<span class="token keyword">class</span><span class="token operator">-</span>map inspection_default
 match <span class="token keyword module">default</span><span class="token operator">-</span>inspection<span class="token operator">-</span>traffic
<span class="token operator">!</span>
<span class="token operator">!</span>
policy<span class="token operator">-</span>map type inspect dns migrated_dns_map_1
 parameters
  message<span class="token operator">-</span>length maximum client auto
  message<span class="token operator">-</span>length maximum <span class="token number">512</span>
  no tcp<span class="token operator">-</span>inspection
policy<span class="token operator">-</span>map global_policy
 <span class="token keyword">class</span> <span class="token class-name">inspection_default</span>
  inspect dns migrated_dns_map_1 
  inspect ftp 
  inspect h323 h225 
  inspect h323 ras 
  inspect ip<span class="token operator">-</span>options 
  inspect netbios 
  inspect rsh 
  inspect rtsp 
  inspect skinny  
  inspect esmtp 
  inspect sqlnet 
  inspect sunrpc 
  inspect tftp 
  inspect sip  
  inspect xdmcp 
policy<span class="token operator">-</span>map type inspect dns migrated_dns_map_2
 parameters
  message<span class="token operator">-</span>length maximum client auto
  message<span class="token operator">-</span>length maximum <span class="token number">512</span>
  no tcp<span class="token operator">-</span>inspection
<span class="token operator">!</span>
service<span class="token operator">-</span>policy global_policy global
prompt hostname context 
call<span class="token operator">-</span>home
 profile <span class="token maybe-class-name">CiscoTAC</span><span class="token operator">-</span><span class="token number">1</span>
  no active
  destination address http https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>tools<span class="token punctuation">.</span><span class="token property-access">cisco</span><span class="token punctuation">.</span><span class="token property-access">com</span><span class="token operator">/</span>its<span class="token operator">/</span>service<span class="token operator">/</span>oddce<span class="token operator">/</span>services<span class="token operator">/</span><span class="token maybe-class-name">DDCEService</span>
  destination address email callhome@cisco<span class="token punctuation">.</span><span class="token property-access">com</span>
  destination transport<span class="token operator">-</span>method http
  subscribe<span class="token operator">-</span>to<span class="token operator">-</span>alert<span class="token operator">-</span>group diagnostic
  subscribe<span class="token operator">-</span>to<span class="token operator">-</span>alert<span class="token operator">-</span>group environment
  subscribe<span class="token operator">-</span>to<span class="token operator">-</span>alert<span class="token operator">-</span>group inventory periodic monthly
  subscribe<span class="token operator">-</span>to<span class="token operator">-</span>alert<span class="token operator">-</span>group configuration periodic monthly
  subscribe<span class="token operator">-</span>to<span class="token operator">-</span>alert<span class="token operator">-</span>group telemetry periodic daily
 profile <span class="token maybe-class-name">License</span>
  destination address http https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>tools<span class="token punctuation">.</span><span class="token property-access">cisco</span><span class="token punctuation">.</span><span class="token property-access">com</span><span class="token operator">/</span>its<span class="token operator">/</span>service<span class="token operator">/</span>oddce<span class="token operator">/</span>services<span class="token operator">/</span><span class="token maybe-class-name">DDCEService</span>
  destination transport<span class="token operator">-</span>method http
<span class="token literal-property property">Cryptochecksum</span><span class="token operator">:</span>e3f109b5557f5bbdc77df280e0748cef
<span class="token operator">:</span> end

</code><button class="copy-code-button">Copy</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="Router 2" class="heading" id="Router_2"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Router 2<div class="heading-after">...</div></h2><div class="heading-children"><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token constant">R2</span><span class="token operator">-</span><span class="token constant">C1</span>#show running<span class="token operator">-</span>config 
<span class="token maybe-class-name">Building</span> configuration<span class="token spread operator">...</span>

<span class="token maybe-class-name">Current</span> configuration <span class="token operator">:</span> <span class="token number">1731</span> bytes
<span class="token operator">!</span>
upgrade fpd auto
version <span class="token number">12.4</span>
service timestamps debug datetime msec
service timestamps log datetime msec
no service password<span class="token operator">-</span>encryption
<span class="token operator">!</span>
hostname <span class="token constant">R2</span><span class="token operator">-</span><span class="token constant">C1</span>
<span class="token operator">!</span>
boot<span class="token operator">-</span>start<span class="token operator">-</span>marker
boot<span class="token operator">-</span>end<span class="token operator">-</span>marker
<span class="token operator">!</span>
logging message<span class="token operator">-</span>counter syslog
<span class="token operator">!</span>
no aaa <span class="token keyword">new</span><span class="token operator">-</span>model
ip source<span class="token operator">-</span>route
no ip icmp rate<span class="token operator">-</span>limit unreachable
ip cef
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
no ip domain lookup
no ipv6 cef
<span class="token operator">!</span>
multilink bundle<span class="token operator">-</span>name authenticated
<span class="token operator">!</span>
<span class="token operator">!</span>
archive
 log config
  hidekeys
<span class="token operator">!</span> 
<span class="token operator">!</span>
crypto isakmp policy <span class="token number">1</span>
 encr aes
 authentication pre<span class="token operator">-</span>share
 group <span class="token number">2</span>
crypto isakmp key pass@word1 address <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
crypto ipsec transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2 esp<span class="token operator">-</span>aes esp<span class="token operator">-</span>sha<span class="token operator">-</span>hmac 
<span class="token operator">!</span>
crypto map routermap2 <span class="token number">10</span> ipsec<span class="token operator">-</span>isakmp 
 <span class="token keyword">set</span> peer <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
 <span class="token keyword">set</span> transform<span class="token operator">-</span><span class="token keyword">set</span> routerset2 
 match address <span class="token number">101</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
ip tcp synwait<span class="token operator">-</span>time <span class="token number">5</span>
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">Ethernet0</span><span class="token operator">/</span><span class="token number">0</span>
 no ip address
 shutdown
 duplex auto
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet0</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 duplex full
 speed <span class="token number">1000</span>
 media<span class="token operator">-</span>type gbic
 negotiation auto
 crypto map routermap2
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet1</span><span class="token operator">/</span><span class="token number">0</span>
 ip address <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.1</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span>
 negotiation auto
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet2</span><span class="token operator">/</span><span class="token number">0</span>
 no ip address
 shutdown
 negotiation auto
<span class="token operator">!</span>
<span class="token keyword">interface</span> <span class="token class-name">GigabitEthernet3</span><span class="token operator">/</span><span class="token number">0</span>
 no ip address
 shutdown
 negotiation auto
<span class="token operator">!</span>
ip forward<span class="token operator">-</span>protocol nd
ip route <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.2</span><span class="token number">.2</span>
ip route <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> <span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>
no ip http server
no ip http secure<span class="token operator">-</span>server
<span class="token operator">!</span>
<span class="token operator">!</span>
<span class="token operator">!</span>
access<span class="token operator">-</span>list <span class="token number">101</span> permit ip <span class="token number">10.10</span><span class="token number">.30</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span> <span class="token number">10.10</span><span class="token number">.10</span><span class="token number">.0</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.255</span>
no cdp log mismatch duplex
<span class="token operator">!</span>
control<span class="token operator">-</span>plane
<span class="token operator">!</span>
gatekeeper
 shutdown
<span class="token operator">!</span>
<span class="token operator">!</span>
line con <span class="token number">0</span>
 exec<span class="token operator">-</span>timeout <span class="token number">0</span> <span class="token number">0</span>
 privilege level <span class="token number">15</span>
 logging synchronous
 stopbits <span class="token number">1</span>
line aux <span class="token number">0</span>
 exec<span class="token operator">-</span>timeout <span class="token number">0</span> <span class="token number">0</span>
 privilege level <span class="token number">15</span>
 logging synchronous
 stopbits <span class="token number">1</span>
line vty <span class="token number">0</span> <span class="token number">4</span>
 login
<span class="token operator">!</span>
end


</code><button class="copy-code-button">Copy</button></pre></div><div class="mod-footer"></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder"><div class="graph-view-container"><div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div><canvas id="graph-canvas" width="512px" height="512px"></canvas></div></div></div><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Synopsis"><span class="tree-item-title"><p>Synopsis</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#References"><span class="tree-item-title"><p>References</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Misc"><span class="tree-item-title"><p>Misc</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#ASA"><span class="tree-item-title"><p>ASA</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#GNS3_Marketplace_(lists_of_supported_images_and_instructions)"><span class="tree-item-title"><p>GNS3 Marketplace (lists of supported images and instructions)</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Commands"><span class="tree-item-title"><p>Commands</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#That_ended_up_being_used_very_frequently"><span class="tree-item-title"><p>That ended up being used very frequently</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#----------------------_Tasks_----------------------"><span class="tree-item-title"><p>---------------------- Tasks ----------------------</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Install_GNS3"><span class="tree-item-title"><p>Install GNS3</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Linux_KVM_Installation"><span class="tree-item-title"><p>Linux KVM Installation</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Windows_Installation"><span class="tree-item-title"><p>Windows Installation</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Install_GNS3_Client"><span class="tree-item-title"><p>Install GNS3 Client</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Install_GNS3_Server_on_Linux_Natively"><span class="tree-item-title"><p>Install GNS3 Server on Linux Natively</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Import_Virtual_Firmware_Images"><span class="tree-item-title"><p>Import Virtual Firmware Images</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#See_if_the_lab_hardware_images_can_be_simulated_in_GNS3"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>See if the lab hardware images can be simulated in GNS3</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Ah_wait_a_minute...."><span class="tree-item-title"><p>Ah wait a minute....</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Find_some_alternatives_to_lab_images"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Find some alternatives to lab images</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Need:"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Need:</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_-_probably_the_7200_-_or_a_virtual_router_VIOS"><span class="tree-item-title"><p>Router - probably the 7200 - or a virtual router VIOS</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Firewall_-_ASA_5504_will_work,_perhaps_pfsense_or_something_else_-_or_ASAv"><span class="tree-item-title"><p>Firewall - ASA 5504 will work, perhaps pfsense or something else - or ASAv</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Switch_-_IOU_L2_Binary_or_IOSvL2"><span class="tree-item-title"><p>Switch - IOU L2 Binary or IOSvL2</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Import_images_into_GNS3_desktop_GUI"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Import images into GNS3 desktop GUI</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#C7200_Router"><span class="tree-item-title"><p>C7200 Router</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#IOU_L2_Linux_Virtual_Switch"><span class="tree-item-title"><p>IOU L2 Linux Virtual Switch</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Dump_base_IOS_config"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Dump base IOS config</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Simple_router_config_and_project_backup_test"><span class="tree-item-title"><p>Simple router config and project backup test</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Importing_a_Virtual_Operating_System_as_PC_into_GNS3"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Importing a Virtual Operating System as PC into GNS3</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Linux_Native_(See_KVM_for_actual_import,_same_as_Native)"><span class="tree-item-title"><p>Linux Native (See KVM for actual import, same as Native)</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#KVM"><span class="tree-item-title"><p>KVM</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Notes_on_Some_Default_Router_Setup_Points"><span class="tree-item-title"><p>Notes on Some Default Router Setup Points</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Visual_comparison_of_lab_configs_vs_default_GNS3_IOS_configs"><span class="tree-item-title"><p>Visual comparison of lab configs vs default GNS3 IOS configs</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configure_Some_Default_Router_Setup"><span class="tree-item-title"><p>Configure Some Default Router Setup</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Importing_or_Dumping_Cisco_Configurations_with_Scripts"><span class="tree-item-title"><p>Importing or Dumping Cisco Configurations with Scripts</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#TCL_and_Expect_Scripts"><span class="tree-item-title"><p>TCL and Expect Scripts</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Talking_to_the_Outside_World_from_GNS3"><span class="tree-item-title"><p>Talking to the Outside World from GNS3</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Linux_Native"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Linux Native</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#How_one_would_setup_an_interface_for_the_GNS3_network_to_talk_with_the_host_computer"><span class="tree-item-title"><p>How one would setup an interface for the GNS3 network to talk with the host computer</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#KVM"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>KVM</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Creating_a_TAP_interface_on_Linux_to_talk_from_Host_to_GNS3_network"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Creating a TAP interface on Linux to talk from Host to GNS3 network</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Add_more_interfaces_to_KVM_bridge_(virbr0)"><span class="tree-item-title"><p>Add more interfaces to KVM bridge (virbr0)</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#problem_is_that_interfaces_from_host_are_not_exposed_to_GNS3_VM"><span class="tree-item-title"><p>problem is that interfaces from host are not exposed to GNS3 VM</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Hence_why_GNS3_only_sees_this_eth0_and_not_my_actual_enp4s0_ethernet_adapter"><span class="tree-item-title"><p>Hence why GNS3 only sees this eth0 and not my actual enp4s0 ethernet adapter</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#And_at_some_point_I_decided_this_was_getting_out_of_hand"><span class="tree-item-title"><p>And at some point I decided this was getting out of hand</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Layout_Network_Topology"><span class="tree-item-title"><p>Layout Network Topology</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#VPN_Tunnel_Configuration_Trial_and_Error"><span class="tree-item-title"><p>VPN Tunnel Configuration Trial and Error</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#ISAKMP,_IPsec,_Interfaces,_Basic_Router_things"><span class="tree-item-title"><p>ISAKMP, IPsec, Interfaces, Basic Router things</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#ISAKMP_VPN_tunnel_verification"><span class="tree-item-title"><p>ISAKMP VPN tunnel verification</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Intermediate_Router_(ISP,_etc)"><span class="tree-item-title"><p>Intermediate Router (ISP, etc)</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_2"><span class="tree-item-title"><p>Router 2</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Quick_Router_1_to_Router_2_VPN_encryption_test"><span class="tree-item-title"><p>Quick Router 1 to Router 2 VPN encryption test</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#ASAv_Firewall"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>ASAv Firewall</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#enable_telnet_forcefully"><span class="tree-item-title"><p>enable telnet forcefully</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#some_user_credentials_notes"><span class="tree-item-title"><p>some user credentials notes</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#ASA_routers_have_something_called_`security-level`"><span class="tree-item-title"><p>ASA routers have something called <code>security-level</code></p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#A_mockup_of_something_that_would_perhaps_work_if_the_ASAv_was_part_of_the_VPN_chain"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>A mockup of something that would perhaps work if the ASAv was part of the VPN chain</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Some_notes_on_failing_Interacting_with_the_ASAv_web_gui"><span class="tree-item-title"><p>Some notes on failing Interacting with the ASAv web gui</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#The_actually_implemented_topology_after_a_lot_of_trial_and_error"><span class="tree-item-title"><p>The actually implemented topology after a lot of trial and error</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Scheme_for_site-to-site_VPN"><span class="tree-item-title"><p>Scheme for site-to-site VPN</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_1"><span class="tree-item-title"><p>Router 1</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_2"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Router 2</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#VPN_tested_by_wireshark_packet_capture"><span class="tree-item-title"><p>VPN tested by wireshark packet capture</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Scheme_site-to-site_with_intermediary_firewall"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Scheme site-to-site with intermediary firewall</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_1"><span class="tree-item-title"><p>Router 1</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Firewall"><span class="tree-item-title"><p>Firewall</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_2"><span class="tree-item-title"><p>Router 2</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Ping_test_across_check_for_encapsulated_packets"><span class="tree-item-title"><p>Ping test across check for encapsulated packets</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Some_full_configuration_dumps_of_Router_1_,_Router_2,_and_the_Firewall"><span class="tree-item-title"><p>Some full configuration dumps of Router 1 , Router 2, and the Firewall</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_1"><span class="tree-item-title"><p>Router 1</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Firewall"><span class="tree-item-title"><p>Firewall</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Router_2"><span class="tree-item-title"><p>Router 2</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></div></div></body></html>